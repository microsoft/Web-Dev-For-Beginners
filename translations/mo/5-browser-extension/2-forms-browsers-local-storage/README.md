<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "8c8cd4af6086cc1d47e1d43aa4983d20",
  "translation_date": "2025-10-22T22:56:33+00:00",
  "source_file": "5-browser-extension/2-forms-browsers-local-storage/README.md",
  "language_code": "mo"
}
-->
# ç€è¦½å™¨æ“´å……åŠŸèƒ½å°ˆæ¡ˆç¬¬äºŒéƒ¨åˆ†ï¼šå‘¼å« APIï¼Œä½¿ç”¨æœ¬åœ°å­˜å„²

## èª²å‰æ¸¬é©—

[èª²å‰æ¸¬é©—](https://ff-quizzes.netlify.app/web/quiz/25)

## ä»‹ç´¹

é‚„è¨˜å¾—ä½ é–‹å§‹å»ºç«‹çš„ç€è¦½å™¨æ“´å……åŠŸèƒ½å—ï¼Ÿç›®å‰ä½ å·²ç¶“æœ‰äº†ä¸€å€‹å¤–è§€ä¸éŒ¯çš„è¡¨å–®ï¼Œä½†å®ƒåŸºæœ¬ä¸Šæ˜¯éœæ…‹çš„ã€‚ä»Šå¤©ï¼Œæˆ‘å€‘å°‡é€šéé€£æ¥çœŸå¯¦æ•¸æ“šä¸¦è³¦äºˆå®ƒè¨˜æ†¶åŠŸèƒ½ä¾†è®“å®ƒè®Šå¾—æ›´åŠ ç”Ÿå‹•ã€‚

æƒ³æƒ³é˜¿æ³¢ç¾…ä»»å‹™æ§åˆ¶é›»è…¦â€”â€”å®ƒå€‘ä¸åƒ…åƒ…é¡¯ç¤ºå›ºå®šçš„ä¿¡æ¯ã€‚å®ƒå€‘ä¸æ–·èˆ‡èˆªå¤©å™¨é€šä¿¡ï¼Œæ›´æ–°é™æ¸¬æ•¸æ“šï¼Œä¸¦è¨˜ä½é—œéµçš„ä»»å‹™åƒæ•¸ã€‚ä»Šå¤©æˆ‘å€‘è¦æ§‹å»ºçš„å°±æ˜¯é€™ç¨®å‹•æ…‹è¡Œç‚ºã€‚ä½ çš„æ“´å……åŠŸèƒ½å°‡é€£æ¥åˆ°äº’è¯ç¶²ï¼ŒæŠ“å–çœŸå¯¦çš„ç’°å¢ƒæ•¸æ“šï¼Œä¸¦è¨˜ä½ä½ çš„è¨­ç½®ä»¥ä¾›ä¸‹æ¬¡ä½¿ç”¨ã€‚

API æ•´åˆå¯èƒ½è½èµ·ä¾†å¾ˆè¤‡é›œï¼Œä½†å¯¦éš›ä¸Šåªæ˜¯æ•™ä½ çš„ç¨‹å¼ç¢¼å¦‚ä½•èˆ‡å…¶ä»–æœå‹™é€šä¿¡ã€‚ç„¡è«–ä½ æ˜¯ç²å–å¤©æ°£æ•¸æ“šã€ç¤¾äº¤åª’é«”å‹•æ…‹ï¼Œé‚„æ˜¯åƒä»Šå¤©æˆ‘å€‘è¦åšçš„é‚£æ¨£ç²å–ç¢³è¶³è·¡ä¿¡æ¯ï¼Œé€™ä¸€åˆ‡éƒ½æ˜¯é—œæ–¼å»ºç«‹é€™äº›æ•¸å­—é€£æ¥ã€‚æˆ‘å€‘é‚„å°‡æ¢ç´¢ç€è¦½å™¨å¦‚ä½•æŒä¹…åŒ–ä¿¡æ¯â€”â€”é¡ä¼¼æ–¼åœ–æ›¸é¤¨ä½¿ç”¨å¡ç‰‡ç›®éŒ„ä¾†è¨˜ä½æ›¸ç±çš„ä½ç½®ã€‚

åœ¨æœ¬èª²çµæŸæ™‚ï¼Œä½ å°‡æ“æœ‰ä¸€å€‹èƒ½å¤ æŠ“å–çœŸå¯¦æ•¸æ“šã€å­˜å„²ä½¿ç”¨è€…åå¥½ä¸¦æä¾›æµæš¢é«”é©—çš„ç€è¦½å™¨æ“´å……åŠŸèƒ½ã€‚è®“æˆ‘å€‘é–‹å§‹å§ï¼

âœ… æŒ‰ç…§é©ç•¶æ–‡ä»¶ä¸­çš„ç·¨è™Ÿæ®µè½ï¼Œäº†è§£æ‡‰å°‡ç¨‹å¼ç¢¼æ”¾ç½®åœ¨å“ªè£¡ã€‚

## è¨­ç½®æ“´å……åŠŸèƒ½ä¸­éœ€è¦æ“ä½œçš„å…ƒç´ 

åœ¨ JavaScript æ“ä½œä»‹é¢ä¹‹å‰ï¼Œå®ƒéœ€è¦å¼•ç”¨ç‰¹å®šçš„ HTML å…ƒç´ ã€‚å°±åƒæœ›é é¡éœ€è¦æŒ‡å‘ç‰¹å®šçš„æ˜Ÿæ˜Ÿä¸€æ¨£â€”â€”åœ¨ä¼½åˆ©ç•¥ç ”ç©¶æœ¨æ˜Ÿçš„è¡›æ˜Ÿä¹‹å‰ï¼Œä»–å¿…é ˆå…ˆå®šä½ä¸¦èšç„¦åœ¨æœ¨æ˜Ÿæœ¬èº«ã€‚

åœ¨ä½ çš„ `index.js` æ–‡ä»¶ä¸­ï¼Œæˆ‘å€‘å°‡å‰µå»ºä¸€äº› `const` è®Šæ•¸ä¾†æ•æ‰æ¯å€‹é‡è¦è¡¨å–®å…ƒç´ çš„å¼•ç”¨ã€‚é€™é¡ä¼¼æ–¼ç§‘å­¸å®¶æ¨™è¨˜ä»–å€‘çš„è¨­å‚™â€”â€”è€Œä¸æ˜¯æ¯æ¬¡éƒ½åœ¨æ•´å€‹å¯¦é©—å®¤ä¸­æœç´¢ï¼Œä»–å€‘å¯ä»¥ç›´æ¥è¨ªå•æ‰€éœ€çš„æ±è¥¿ã€‚

```javascript
// form fields
const form = document.querySelector('.form-data');
const region = document.querySelector('.region-name');
const apiKey = document.querySelector('.api-key');

// results
const errors = document.querySelector('.errors');
const loading = document.querySelector('.loading');
const results = document.querySelector('.result-container');
const usage = document.querySelector('.carbon-usage');
const fossilfuel = document.querySelector('.fossil-fuel');
const myregion = document.querySelector('.my-region');
const clearBtn = document.querySelector('.clear-btn');
```

**é€™æ®µç¨‹å¼ç¢¼çš„ä½œç”¨ï¼š**
- ä½¿ç”¨ `document.querySelector()` å’Œ CSS é¡é¸æ“‡å™¨**æ•æ‰**è¡¨å–®å…ƒç´ 
- **å‰µå»º**æŒ‡å‘åœ°å€åç¨±å’Œ API é‡‘é‘°è¼¸å…¥å­—æ®µçš„å¼•ç”¨
- **å»ºç«‹**èˆ‡é¡¯ç¤ºç¢³ä½¿ç”¨æ•¸æ“šçš„çµæœå…ƒç´ çš„é€£æ¥
- **è¨­ç½®**å° UI å…ƒç´ ï¼ˆå¦‚åŠ è¼‰æŒ‡ç¤ºå™¨å’ŒéŒ¯èª¤æ¶ˆæ¯ï¼‰çš„è¨ªå•
- **å­˜å„²**æ¯å€‹å…ƒç´ çš„å¼•ç”¨åˆ° `const` è®Šæ•¸ä¸­ï¼Œä»¥ä¾¿åœ¨ç¨‹å¼ç¢¼ä¸­è¼•é¬†é‡ç”¨

## æ·»åŠ äº‹ä»¶ç›£è½å™¨

ç¾åœ¨æˆ‘å€‘å°‡è®“ä½ çš„æ“´å……åŠŸèƒ½å°ä½¿ç”¨è€…æ“ä½œåšå‡ºéŸ¿æ‡‰ã€‚äº‹ä»¶ç›£è½å™¨æ˜¯ä½ çš„ç¨‹å¼ç¢¼ç›£æ§ä½¿ç”¨è€…äº¤äº’çš„æ–¹å¼ã€‚å¯ä»¥å°‡å®ƒå€‘æƒ³åƒæˆæ—©æœŸé›»è©±äº¤æ›æ©Ÿä¸­çš„æ“ä½œå“¡â€”â€”ä»–å€‘ç›£è½ä¾†é›»ï¼Œä¸¦åœ¨æœ‰äººæƒ³è¦å»ºç«‹é€£æ¥æ™‚æ¥é€šæ­£ç¢ºçš„é›»è·¯ã€‚

```javascript
form.addEventListener('submit', (e) => handleSubmit(e));
clearBtn.addEventListener('click', (e) => reset(e));
init();
```

**ç†è§£é€™äº›æ¦‚å¿µï¼š**
- **é™„åŠ **ä¸€å€‹æäº¤ç›£è½å™¨åˆ°è¡¨å–®ï¼Œç•¶ä½¿ç”¨è€…æŒ‰ä¸‹ Enter æˆ–é»æ“Šæäº¤æ™‚è§¸ç™¼
- **é€£æ¥**ä¸€å€‹é»æ“Šç›£è½å™¨åˆ°æ¸…é™¤æŒ‰éˆ•ï¼Œç”¨æ–¼é‡ç½®è¡¨å–®
- **å‚³é**äº‹ä»¶å°è±¡ `(e)` åˆ°è™•ç†å‡½æ•¸ä»¥é€²è¡Œé¡å¤–æ§åˆ¶
- **ç«‹å³èª¿ç”¨** `init()` å‡½æ•¸ä»¥è¨­ç½®æ“´å……åŠŸèƒ½çš„åˆå§‹ç‹€æ…‹

âœ… æ³¨æ„é€™è£¡ä½¿ç”¨çš„ç°¡æ½”ç®­é ­å‡½æ•¸èªæ³•ã€‚é€™ç¨®ç¾ä»£ JavaScript æ–¹æ³•æ¯”å‚³çµ±å‡½æ•¸è¡¨é”å¼æ›´ç°¡æ½”ï¼Œä½†å…©è€…éƒ½åŒæ¨£æœ‰æ•ˆï¼

## å»ºç«‹åˆå§‹åŒ–å’Œé‡ç½®å‡½æ•¸

è®“æˆ‘å€‘ç‚ºä½ çš„æ“´å……åŠŸèƒ½å‰µå»ºåˆå§‹åŒ–é‚è¼¯ã€‚`init()` å‡½æ•¸å°±åƒèˆ¹çš„å°èˆªç³»çµ±æª¢æŸ¥å…¶å„€å™¨â€”â€”å®ƒç¢ºå®šç•¶å‰ç‹€æ…‹ä¸¦ç›¸æ‡‰åœ°èª¿æ•´ä»‹é¢ã€‚å®ƒæª¢æŸ¥æ˜¯å¦æœ‰äººä¹‹å‰ä½¿ç”¨éä½ çš„æ“´å……åŠŸèƒ½ï¼Œä¸¦åŠ è¼‰ä»–å€‘ä¹‹å‰çš„è¨­ç½®ã€‚

`reset()` å‡½æ•¸ç‚ºä½¿ç”¨è€…æä¾›äº†ä¸€å€‹å…¨æ–°çš„é–‹å§‹â€”â€”é¡ä¼¼æ–¼ç§‘å­¸å®¶åœ¨å¯¦é©—ä¹‹é–“é‡ç½®å„€å™¨ä»¥ç¢ºä¿æ•¸æ“šçš„ç´”æ½”æ€§ã€‚

```javascript
function init() {
	// Check if user has previously saved API credentials
	const storedApiKey = localStorage.getItem('apiKey');
	const storedRegion = localStorage.getItem('regionName');

	// Set extension icon to generic green (placeholder for future lesson)
	// TODO: Implement icon update in next lesson

	if (storedApiKey === null || storedRegion === null) {
		// First-time user: show the setup form
		form.style.display = 'block';
		results.style.display = 'none';
		loading.style.display = 'none';
		clearBtn.style.display = 'none';
		errors.textContent = '';
	} else {
		// Returning user: load their saved data automatically
		displayCarbonUsage(storedApiKey, storedRegion);
		results.style.display = 'none';
		form.style.display = 'none';
		clearBtn.style.display = 'block';
	}
}

function reset(e) {
	e.preventDefault();
	// Clear stored region to allow user to choose a new location
	localStorage.removeItem('regionName');
	// Restart the initialization process
	init();
}
```

**ä»¥ä¸‹æ˜¯é€™è£¡ç™¼ç”Ÿçš„äº‹æƒ…ï¼š**
- **æª¢ç´¢**ç€è¦½å™¨æœ¬åœ°å­˜å„²ä¸­çš„ API é‡‘é‘°å’Œåœ°å€
- **æª¢æŸ¥**é€™æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨è€…ï¼ˆæ²’æœ‰å­˜å„²çš„æ†‘æ“šï¼‰é‚„æ˜¯å›è¨ªä½¿ç”¨è€…
- **é¡¯ç¤º**æ–°ä½¿ç”¨è€…çš„è¨­ç½®è¡¨å–®ï¼Œéš±è—å…¶ä»–ä»‹é¢å…ƒç´ 
- **è‡ªå‹•åŠ è¼‰**å·²ä¿å­˜çš„æ•¸æ“šä»¥ä¾›å›è¨ªä½¿ç”¨è€…ä½¿ç”¨ï¼Œä¸¦é¡¯ç¤ºé‡ç½®é¸é …
- **ç®¡ç†**åŸºæ–¼å¯ç”¨æ•¸æ“šçš„ä½¿ç”¨è€…ä»‹é¢ç‹€æ…‹

**é—œæ–¼æœ¬åœ°å­˜å„²çš„é—œéµæ¦‚å¿µï¼š**
- **æŒä¹…åŒ–**ç€è¦½å™¨æœƒè©±ä¹‹é–“çš„æ•¸æ“šï¼ˆèˆ‡æœƒè©±å­˜å„²ä¸åŒï¼‰
- ä½¿ç”¨ `getItem()` å’Œ `setItem()` **å­˜å„²**æ•¸æ“šä½œç‚ºéµå€¼å°
- ç•¶æŸå€‹éµæ²’æœ‰æ•¸æ“šæ™‚ï¼Œ**è¿”å›** `null`
- æä¾›ä¸€ç¨®ç°¡å–®çš„æ–¹æ³•ä¾†è¨˜ä½ä½¿ç”¨è€…åå¥½å’Œè¨­ç½®

> ğŸ’¡ **ç†è§£ç€è¦½å™¨å­˜å„²**ï¼š[LocalStorage](https://developer.mozilla.org/docs/Web/API/Window/localStorage) å°±åƒçµ¦ä½ çš„æ“´å……åŠŸèƒ½æä¾›æŒä¹…è¨˜æ†¶ã€‚æƒ³æƒ³å¤ä»£äºæ­·å±±å¤§åœ–æ›¸é¤¨å¦‚ä½•å­˜å„²å·è»¸â€”â€”å³ä½¿å­¸è€…é›¢é–‹ä¸¦è¿”å›ï¼Œä¿¡æ¯ä»ç„¶å¯ç”¨ã€‚
>
> **ä¸»è¦ç‰¹é»ï¼š**
> - **æŒä¹…åŒ–**æ•¸æ“šï¼Œå³ä½¿ä½ é—œé–‰ç€è¦½å™¨
> - **å­˜æ´»**é›»è…¦é‡å•Ÿå’Œç€è¦½å™¨å´©æ½°
> - **æä¾›**å¤§é‡å­˜å„²ç©ºé–“ä»¥å­˜å„²ä½¿ç”¨è€…åå¥½
> - **æä¾›**å³æ™‚è¨ªå•ï¼Œç„¡éœ€ç¶²çµ¡å»¶é²

> **é‡è¦æ³¨æ„äº‹é …**ï¼šä½ çš„ç€è¦½å™¨æ“´å……åŠŸèƒ½æœ‰è‡ªå·±ç¨ç«‹çš„æœ¬åœ°å­˜å„²ï¼Œèˆ‡æ™®é€šç¶²é åˆ†é–‹ã€‚é€™æä¾›äº†å®‰å…¨æ€§ä¸¦é˜²æ­¢èˆ‡å…¶ä»–ç¶²ç«™ç™¼ç”Ÿè¡çªã€‚

ä½ å¯ä»¥é€šéæ‰“é–‹ç€è¦½å™¨é–‹ç™¼è€…å·¥å…· (F12)ï¼Œå°èˆªåˆ° **Application** æ¨™ç±¤ï¼Œä¸¦å±•é–‹ **Local Storage** éƒ¨åˆ†ä¾†æŸ¥çœ‹å­˜å„²çš„æ•¸æ“šã€‚

![æœ¬åœ°å­˜å„²é¢æ¿](../../../../translated_images/localstorage.472f8147b6a3f8d141d9551c95a2da610ac9a3c6a73d4a1c224081c98bae09d9.mo.png)

> âš ï¸ **å®‰å…¨è€ƒé‡**ï¼šåœ¨ç”Ÿç”¢æ‡‰ç”¨ä¸­ï¼Œå°‡ API é‡‘é‘°å­˜å„²åœ¨ LocalStorage ä¸­å­˜åœ¨å®‰å…¨é¢¨éšªï¼Œå› ç‚º JavaScript å¯ä»¥è¨ªå•é€™äº›æ•¸æ“šã€‚å‡ºæ–¼å­¸ç¿’ç›®çš„ï¼Œé€™ç¨®æ–¹æ³•æ˜¯å¯ä»¥çš„ï¼Œä½†çœŸæ­£çš„æ‡‰ç”¨æ‡‰ä½¿ç”¨å®‰å…¨çš„ä¼ºæœå™¨ç«¯å­˜å„²ä¾†ä¿å­˜æ•æ„Ÿæ†‘æ“šã€‚

## è™•ç†è¡¨å–®æäº¤

ç¾åœ¨æˆ‘å€‘å°‡è™•ç†ç•¶æœ‰äººæäº¤è¡¨å–®æ™‚æœƒç™¼ç”Ÿä»€éº¼ã€‚é»˜èªæƒ…æ³ä¸‹ï¼Œç€è¦½å™¨åœ¨è¡¨å–®æäº¤æ™‚æœƒé‡æ–°åŠ è¼‰é é¢ï¼Œä½†æˆ‘å€‘å°‡æ””æˆªæ­¤è¡Œç‚ºä»¥å‰µå»ºæ›´æµæš¢çš„é«”é©—ã€‚

é€™ç¨®æ–¹æ³•é¡ä¼¼æ–¼ä»»å‹™æ§åˆ¶å¦‚ä½•è™•ç†èˆªå¤©å™¨é€šä¿¡â€”â€”è€Œä¸æ˜¯æ¯æ¬¡å‚³è¼¸éƒ½é‡ç½®æ•´å€‹ç³»çµ±ï¼Œå®ƒå€‘åœ¨è™•ç†æ–°ä¿¡æ¯çš„åŒæ™‚ä¿æŒé€£çºŒé‹è¡Œã€‚

å‰µå»ºä¸€å€‹å‡½æ•¸ä¾†æ•æ‰è¡¨å–®æäº¤äº‹ä»¶ä¸¦æå–ä½¿ç”¨è€…çš„è¼¸å…¥ï¼š

```javascript
function handleSubmit(e) {
	e.preventDefault();
	setUpUser(apiKey.value, region.value);
}
```

**åœ¨ä¸Šé¢ï¼Œæˆ‘å€‘å·²ç¶“ï¼š**
- **é˜²æ­¢**é»˜èªçš„è¡¨å–®æäº¤è¡Œç‚ºï¼Œé¿å…é é¢åˆ·æ–°
- **æå–**ä½¿ç”¨è€…è¼¸å…¥çš„ API é‡‘é‘°å’Œåœ°å€å­—æ®µçš„å€¼
- **å°‡**è¡¨å–®æ•¸æ“šå‚³éçµ¦ `setUpUser()` å‡½æ•¸é€²è¡Œè™•ç†
- **ä¿æŒ**å–®é æ‡‰ç”¨è¡Œç‚ºï¼Œé¿å…é é¢é‡æ–°åŠ è¼‰

âœ… è¨˜ä½ä½ çš„ HTML è¡¨å–®å­—æ®µåŒ…å« `required` å±¬æ€§ï¼Œå› æ­¤ç€è¦½å™¨æœƒè‡ªå‹•é©—è­‰ä½¿ç”¨è€…åœ¨æ­¤å‡½æ•¸é‹è¡Œä¹‹å‰æä¾›äº† API é‡‘é‘°å’Œåœ°å€ã€‚

## è¨­ç½®ä½¿ç”¨è€…åå¥½

`setUpUser` å‡½æ•¸è² è²¬ä¿å­˜ä½¿ç”¨è€…æ†‘æ“šä¸¦å•Ÿå‹•ç¬¬ä¸€æ¬¡ API èª¿ç”¨ã€‚é€™å‰µé€ äº†ä¸€å€‹å¾è¨­ç½®åˆ°é¡¯ç¤ºçµæœçš„æµæš¢éæ¸¡ã€‚

```javascript
function setUpUser(apiKey, regionName) {
	// Save user credentials for future sessions
	localStorage.setItem('apiKey', apiKey);
	localStorage.setItem('regionName', regionName);
	
	// Update UI to show loading state
	loading.style.display = 'block';
	errors.textContent = '';
	clearBtn.style.display = 'block';
	
	// Fetch carbon usage data with user's credentials
	displayCarbonUsage(apiKey, regionName);
}
```

**é€æ­¥è§£æé€™è£¡ç™¼ç”Ÿçš„äº‹æƒ…ï¼š**
- **ä¿å­˜** API é‡‘é‘°å’Œåœ°å€åç¨±åˆ°æœ¬åœ°å­˜å„²ä»¥ä¾›æœªä¾†ä½¿ç”¨
- **é¡¯ç¤º**åŠ è¼‰æŒ‡ç¤ºå™¨ä»¥é€šçŸ¥ä½¿ç”¨è€…æ­£åœ¨æŠ“å–æ•¸æ“š
- **æ¸…é™¤**é¡¯ç¤ºä¸­çš„ä»»ä½•å…ˆå‰éŒ¯èª¤æ¶ˆæ¯
- **é¡¯ç¤º**æ¸…é™¤æŒ‰éˆ•ï¼Œä¾›ä½¿ç”¨è€…ç¨å¾Œé‡ç½®å…¶è¨­ç½®
- **å•Ÿå‹•** API èª¿ç”¨ä»¥æŠ“å–çœŸå¯¦çš„ç¢³ä½¿ç”¨æ•¸æ“š

æ­¤å‡½æ•¸é€šéåœ¨ä¸€å€‹å”èª¿çš„æ“ä½œä¸­ç®¡ç†æ•¸æ“šæŒä¹…æ€§å’Œä½¿ç”¨è€…ä»‹é¢æ›´æ–°ï¼Œå‰µé€ äº†ä¸€å€‹ç„¡ç¸«çš„ä½¿ç”¨è€…é«”é©—ã€‚

## é¡¯ç¤ºç¢³ä½¿ç”¨æ•¸æ“š

ç¾åœ¨æˆ‘å€‘å°‡é€šé API å°‡ä½ çš„æ“´å……åŠŸèƒ½é€£æ¥åˆ°å¤–éƒ¨æ•¸æ“šæºã€‚é€™å°‡ä½ çš„æ“´å……åŠŸèƒ½å¾ä¸€å€‹ç¨ç«‹å·¥å…·è½‰è®Šç‚ºèƒ½å¤ è¨ªå•ä¾†è‡ªäº’è¯ç¶²çš„å¯¦æ™‚ä¿¡æ¯ã€‚

**ç†è§£ API**

[API](https://www.webopedia.com/TERM/A/API.html) æ˜¯ä¸åŒæ‡‰ç”¨ä¹‹é–“é€šä¿¡çš„æ–¹å¼ã€‚å¯ä»¥å°‡å®ƒå€‘æƒ³åƒæˆ 19 ä¸–ç´€é€£æ¥é™é åŸå¸‚çš„é›»å ±ç³»çµ±â€”â€”æ“ä½œå“¡æœƒå‘é ç¨‹ç«™é»ç™¼é€è«‹æ±‚ä¸¦æ¥æ”¶æ‰€éœ€ä¿¡æ¯çš„éŸ¿æ‡‰ã€‚æ¯æ¬¡ä½ æŸ¥çœ‹ç¤¾äº¤åª’é«”ã€å‘èªéŸ³åŠ©æ‰‹æå•æˆ–ä½¿ç”¨é…é€æ‡‰ç”¨ï¼ŒAPI éƒ½åœ¨ä¿ƒé€²é€™äº›æ•¸æ“šäº¤æ›ã€‚

**é—œæ–¼ REST API çš„é—œéµæ¦‚å¿µï¼š**
- **REST** ä»£è¡¨â€œè¡¨è¿°æ€§ç‹€æ…‹è½‰ç§»â€
- **ä½¿ç”¨**æ¨™æº– HTTP æ–¹æ³•ï¼ˆGETã€POSTã€PUTã€DELETEï¼‰èˆ‡æ•¸æ“šäº¤äº’
- **è¿”å›**å¯é æ¸¬æ ¼å¼çš„æ•¸æ“šï¼Œé€šå¸¸æ˜¯ JSON
- **æä¾›**ä¸€è‡´çš„åŸºæ–¼ URL çš„ç«¯é»ä»¥é€²è¡Œä¸åŒé¡å‹çš„è«‹æ±‚

âœ… æˆ‘å€‘å°‡ä½¿ç”¨çš„ [CO2 Signal API](https://www.co2signal.com/) æä¾›ä¾†è‡ªå…¨çƒé›»ç¶²çš„å¯¦æ™‚ç¢³å¼·åº¦æ•¸æ“šã€‚é€™å¹«åŠ©ä½¿ç”¨è€…äº†è§£å…¶é›»åŠ›ä½¿ç”¨çš„ç’°å¢ƒå½±éŸ¿ï¼

> ğŸ’¡ **ç†è§£éåŒæ­¥ JavaScript**ï¼š[`async` é—œéµå­—](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/async_function) ä½¿ä½ çš„ç¨‹å¼ç¢¼èƒ½å¤ åŒæ™‚è™•ç†å¤šå€‹æ“ä½œã€‚ç•¶ä½ å‘ä¼ºæœå™¨è«‹æ±‚æ•¸æ“šæ™‚ï¼Œä½ ä¸å¸Œæœ›æ•´å€‹æ“´å……åŠŸèƒ½å‡çµâ€”â€”é€™å°±åƒç©ºä¸­äº¤é€šç®¡åˆ¶åœ¨ç­‰å¾…ä¸€æ¶é£›æ©Ÿå›æ‡‰æ™‚åœæ­¢æ‰€æœ‰æ“ä½œã€‚
>
> **ä¸»è¦å¥½è™•ï¼š**
> - **ä¿æŒ**æ“´å……åŠŸèƒ½çš„éŸ¿æ‡‰æ€§ï¼ŒåŒæ™‚æ•¸æ“šåŠ è¼‰
> - **å…è¨±**å…¶ä»–ç¨‹å¼ç¢¼åœ¨ç¶²çµ¡è«‹æ±‚æœŸé–“ç¹¼çºŒåŸ·è¡Œ
> - **æ”¹å–„**ç¨‹å¼ç¢¼å¯è®€æ€§ï¼Œç›¸æ¯”å‚³çµ±çš„å›èª¿æ¨¡å¼
> - **æ”¯æŒ**ç¶²çµ¡å•é¡Œçš„å„ªé›…éŒ¯èª¤è™•ç†

é€™è£¡æœ‰ä¸€æ®µé—œæ–¼ `async` çš„å¿«é€Ÿè¦–é »ï¼š

[![ç®¡ç† Promise çš„ Async å’Œ Await](https://img.youtube.com/vi/YwmlRkrxvkk/0.jpg)](https://youtube.com/watch?v=YwmlRkrxvkk "ç®¡ç† Promise çš„ Async å’Œ Await")

> ğŸ¥ é»æ“Šä¸Šæ–¹åœ–ç‰‡è§€çœ‹é—œæ–¼ async/await çš„è¦–é »ã€‚

å‰µå»ºå‡½æ•¸ä»¥æŠ“å–ä¸¦é¡¯ç¤ºç¢³ä½¿ç”¨æ•¸æ“šï¼š

```javascript
// Modern fetch API approach (no external dependencies needed)
async function displayCarbonUsage(apiKey, region) {
	try {
		// Fetch carbon intensity data from CO2 Signal API
		const response = await fetch('https://api.co2signal.com/v1/latest', {
			method: 'GET',
			headers: {
				'auth-token': apiKey,
				'Content-Type': 'application/json'
			},
			// Add query parameters for the specific region
			...new URLSearchParams({ countryCode: region }) && {
				url: `https://api.co2signal.com/v1/latest?countryCode=${region}`
			}
		});

		// Check if the API request was successful
		if (!response.ok) {
			throw new Error(`API request failed: ${response.status}`);
		}

		const data = await response.json();
		const carbonData = data.data;

		// Calculate rounded carbon intensity value
		const carbonIntensity = Math.round(carbonData.carbonIntensity);

		// Update the user interface with fetched data
		loading.style.display = 'none';
		form.style.display = 'none';
		myregion.textContent = region.toUpperCase();
		usage.textContent = `${carbonIntensity} grams (grams COâ‚‚ emitted per kilowatt hour)`;
		fossilfuel.textContent = `${carbonData.fossilFuelPercentage.toFixed(2)}% (percentage of fossil fuels used to generate electricity)`;
		results.style.display = 'block';

		// TODO: calculateColor(carbonIntensity) - implement in next lesson

	} catch (error) {
		console.error('Error fetching carbon data:', error);
		
		// Show user-friendly error message
		loading.style.display = 'none';
		results.style.display = 'none';
		errors.textContent = 'Sorry, we couldn\'t fetch data for that region. Please check your API key and region code.';
	}
}
```

**è§£æé€™è£¡ç™¼ç”Ÿçš„äº‹æƒ…ï¼š**
- **ä½¿ç”¨**ç¾ä»£çš„ `fetch()` APIï¼Œè€Œä¸æ˜¯åƒ Axios é€™æ¨£çš„å¤–éƒ¨åº«ï¼Œæä¾›æ›´ç°¡æ½”ã€ç„¡ä¾è³´çš„ç¨‹å¼ç¢¼
- **å¯¦ç¾**æ­£ç¢ºçš„éŒ¯èª¤æª¢æŸ¥ï¼Œä½¿ç”¨ `response.ok` åŠæ—©æ•æ‰ API å¤±æ•—
- **è™•ç†**éåŒæ­¥æ“ä½œï¼Œä½¿ç”¨ `async/await` æä¾›æ›´å¯è®€çš„ç¨‹å¼ç¢¼æµç¨‹
- **ä½¿ç”¨** `auth-token` æ¨™é ­é€²è¡Œ CO2 Signal API çš„èº«ä»½é©—è­‰
- **è§£æ** JSON éŸ¿æ‡‰æ•¸æ“šä¸¦æå–ç¢³å¼·åº¦ä¿¡æ¯
- **æ›´æ–°**å¤šå€‹ UI å…ƒç´ ï¼Œé¡¯ç¤ºæ ¼å¼åŒ–çš„ç’°å¢ƒæ•¸æ“š
- **æä¾›**ä½¿ç”¨è€…å‹å¥½çš„éŒ¯èª¤æ¶ˆæ¯ï¼Œç•¶ API èª¿ç”¨å¤±æ•—æ™‚

**å±•ç¤ºçš„ç¾ä»£ JavaScript é—œéµæ¦‚å¿µï¼š**
- ä½¿ç”¨ `${}` èªæ³•çš„ **æ¨¡æ¿å­—é¢å€¼**ï¼Œæä¾›ç°¡æ½”çš„å­—ç¬¦ä¸²æ ¼å¼åŒ–
- ä½¿ç”¨ try/catch å¡Šé€²è¡Œ **éŒ¯èª¤è™•ç†**ï¼Œæä¾›ç©©å¥çš„æ‡‰ç”¨
- ä½¿ç”¨ **Async/await** æ¨¡å¼ï¼Œå„ªé›…åœ°è™•ç†ç¶²çµ¡è«‹æ±‚
- ä½¿ç”¨ **å°è±¡è§£æ§‹**ï¼Œå¾ API éŸ¿æ‡‰ä¸­æå–ç‰¹å®šæ•¸æ“š
- ä½¿ç”¨ **æ–¹æ³•éˆæ¥**ï¼Œé€²è¡Œå¤šå€‹ DOM æ“ä½œ

âœ… æ­¤å‡½æ•¸å±•ç¤ºäº†å¹¾å€‹é‡è¦çš„ç¶²é é–‹ç™¼æ¦‚å¿µâ€”â€”èˆ‡å¤–éƒ¨ä¼ºæœå™¨é€šä¿¡ã€è™•ç†èº«ä»½é©—è­‰ã€è™•ç†æ•¸æ“šã€æ›´æ–°ä»‹é¢ä»¥åŠå„ªé›…åœ°ç®¡ç†éŒ¯èª¤ã€‚é€™äº›æ˜¯å°ˆæ¥­é–‹ç™¼äººå“¡ç¶“å¸¸ä½¿ç”¨çš„åŸºæœ¬æŠ€èƒ½ã€‚

ğŸ‰ **ä½ å·²å®Œæˆçš„æˆæœï¼š** ä½ å·²å‰µå»ºäº†ä¸€å€‹ç€è¦½å™¨æ“´å……åŠŸèƒ½ï¼Œèƒ½å¤ ï¼š
- **é€£æ¥**åˆ°äº’è¯ç¶²ä¸¦æª¢ç´¢çœŸå¯¦çš„ç’°å¢ƒæ•¸æ“š
- **æŒä¹…åŒ–**ä½¿ç”¨è€…è¨­ç½®ï¼Œè·¨æœƒè©±ä¿å­˜
- **å„ªé›…åœ°è™•ç†**éŒ¯èª¤ï¼Œè€Œä¸æ˜¯å´©æ½°
- **æä¾›**æµæš¢ã€å°ˆæ¥­çš„ä½¿ç”¨è€…é«”é©—

é€šéé‹è¡Œ `npm run build` ä¸¦åœ¨ç€è¦½å™¨ä¸­åˆ·æ–°ä½ çš„æ“´å……åŠŸèƒ½ä¾†æ¸¬è©¦ä½ çš„ä½œå“ã€‚ç¾åœ¨ä½ æ“æœ‰äº†ä¸€å€‹åŠŸèƒ½é½Šå…¨çš„ç¢³è¶³è·¡è¿½è¹¤å™¨ã€‚ä¸‹ä¸€èª²å°‡æ·»åŠ å‹•æ…‹åœ–æ¨™åŠŸèƒ½ä»¥å®Œæˆæ“´å……åŠŸèƒ½ã€‚

---

## GitHub Copilot Agent æŒ‘æˆ° ğŸš€

ä½¿ç”¨ Agent æ¨¡å¼å®Œæˆä»¥ä¸‹æŒ‘æˆ°ï¼š

**æè¿°ï¼š** é€šéæ·»åŠ éŒ¯èª¤è™•ç†æ”¹é€²å’Œä½¿ç”¨è€…é«”é©—åŠŸèƒ½ä¾†å¢å¼·ç€è¦½å™¨æ“´å……åŠŸèƒ½ã€‚æ­¤æŒ‘æˆ°å°‡å¹«åŠ©ä½ ç·´ç¿’ä½¿ç”¨ç¾ä»£ JavaScript æ¨¡å¼è™•ç† APIã€æœ¬åœ°å­˜å„²å’Œ DOM æ“ä½œã€‚

**æç¤ºï¼š** å‰µå»ºä¸€å€‹å¢å¼·ç‰ˆçš„ displayCarbonUsage å‡½æ•¸ï¼ŒåŒ…å«ä»¥ä¸‹åŠŸèƒ½ï¼š1ï¼‰å°å¤±æ•—çš„ API èª¿ç”¨é€²è¡ŒæŒ‡æ•¸å›é€€çš„é‡è©¦æ©Ÿåˆ¶ï¼Œ2ï¼‰åœ¨é€²è¡Œ API èª¿ç”¨ä¹‹å‰å°åœ°å€ä»£ç¢¼é€²è¡Œè¼¸å…¥é©—è­‰ï¼Œ3ï¼‰å¸¶æœ‰é€²åº¦æŒ‡ç¤ºå™¨çš„åŠ è¼‰å‹•ç•«ï¼Œ4ï¼‰åœ¨æœ¬åœ°å­˜å„²ä¸­ç·©å­˜ API éŸ¿æ‡‰ä¸¦è¨­ç½®éæœŸæ™‚é–“æˆ³ï¼ˆç·©å­˜ 30 åˆ†é˜ï¼‰ï¼Œ5ï¼‰é¡¯ç¤ºä¾†è‡ªä¹‹å‰ API èª¿ç”¨çš„æ­·å²æ•¸æ“šã€‚æ­¤å¤–ï¼Œæ·»åŠ é©ç•¶çš„ TypeScript é¢¨æ ¼ JSDoc è¨»è§£ä»¥è¨˜éŒ„æ‰€æœ‰å‡½æ•¸åƒæ•¸å’Œè¿”å›é¡å‹ã€‚

äº†è§£æ›´å¤šé—œæ–¼ [Agent æ¨¡å¼](https://code.visualstudio.com/blogs/2025/02/24/introducing-copilot-agent-mode) çš„ä¿¡æ¯ã€‚

## ğŸš€ æŒ‘æˆ°

é€šéæ¢ç´¢å¯ç”¨æ–¼ç¶²é é–‹ç™¼çš„å¤§é‡åŸºæ–¼ç€è¦½å™¨çš„ APIï¼Œæ“´å±•ä½ å° API çš„ç†è§£ã€‚é¸æ“‡ä»¥ä¸‹ç€è¦½å™¨ API ä¹‹ä¸€ä¸¦å»ºç«‹ä¸€å€‹å°å‹æ¼”ç¤ºï¼š

- [åœ°ç†å®šä½ API](https://developer.mozilla.org/docs/Web/API/Geolocation_API) - ç²å–ä½¿ç”¨è€…çš„ç•¶å‰ä½ç½®
- [é€šçŸ¥ API](https://developer.mozilla.org/docs/Web/API/Notifications_API) - ç™¼é€æ¡Œé¢é€šçŸ¥
- [HTML æ‹–æ”¾ API](https://developer.mozilla.org/docs/Web/API/HTML_Drag_and_Drop_API) - å‰µå»ºäº¤äº’å¼æ‹–æ”¾ä»‹é¢
- [ç¶²é å­˜å„² API](https://developer.mozilla.org/docs/Web/API/Web_Storage_API) - é«˜ç´šæœ¬åœ°å­˜å„²æŠ€è¡“
- [Fetch API](https://developer.mozilla.org/docs/Web/API/Fetch_API) - XMLHttpRequest çš„ç¾ä»£æ›¿ä»£æ–¹æ¡ˆ

**ç ”ç©¶å•é¡Œè€ƒæ…®ï¼š**
- æ­¤ API è§£æ±ºäº†å“ªäº›ç¾å¯¦ä¸–ç•Œçš„å•é¡Œï¼Ÿ
- è©² API å¦‚ä½•è™•ç†éŒ¯èª¤å’Œé‚Šç•Œæƒ…æ³ï¼Ÿ
- ä½¿ç”¨æ­¤ API æ™‚æœ‰å“ªäº›å®‰å…¨è€ƒé‡ï¼Ÿ
- æ­¤ API åœ¨ä¸åŒç€è¦½å™¨ä¸­çš„æ”¯æŒç¨‹åº¦å¦‚ä½•ï¼Ÿ

åœ¨ç ”ç©¶ä¹‹å¾Œï¼Œç¢ºå®šå“ªäº›ç‰¹å¾µä½¿ API å°é–‹ç™¼è€…å‹å¥½ä¸”å¯é ã€‚

## èª²å¾Œæ¸¬é©—

[èª²å¾Œæ¸¬é©—](https://ff-quizzes.netlify.app/web/quiz/26)

## å›é¡§èˆ‡è‡ªå­¸
æ‚¨åœ¨æœ¬èª²ç¨‹ä¸­å­¸ç¿’äº† LocalStorage å’Œ APIï¼Œé€™å…©è€…å°å°ˆæ¥­çš„ç¶²é é–‹ç™¼è€…ä¾†èªªéƒ½éå¸¸æœ‰ç”¨ã€‚æ‚¨èƒ½æƒ³åˆ°é€™å…©è€…å¦‚ä½•å”åŒå·¥ä½œå—ï¼Ÿè©¦è‘—æ€è€ƒä¸€ä¸‹ï¼Œæ‚¨æœƒå¦‚ä½•è¨­è¨ˆä¸€å€‹ç¶²ç«™ä¾†å­˜å„²ä¾› API ä½¿ç”¨çš„é …ç›®ã€‚

## ä½œæ¥­

[æ¡ç”¨ä¸€å€‹ API](assignment.md)

---

**å…è²¬è²æ˜**ï¼š  
æœ¬æ–‡ä»¶å·²ä½¿ç”¨ AI ç¿»è­¯æœå‹™ [Co-op Translator](https://github.com/Azure/co-op-translator) é€²è¡Œç¿»è­¯ã€‚å„˜ç®¡æˆ‘å€‘åŠªåŠ›ç¢ºä¿æº–ç¢ºæ€§ï¼Œä½†è«‹æ³¨æ„ï¼Œè‡ªå‹•ç¿»è­¯å¯èƒ½åŒ…å«éŒ¯èª¤æˆ–ä¸æº–ç¢ºä¹‹è™•ã€‚åŸå§‹æ–‡ä»¶çš„æ¯èªç‰ˆæœ¬æ‡‰è¢«è¦–ç‚ºæ¬Šå¨ä¾†æºã€‚å°æ–¼é—œéµä¿¡æ¯ï¼Œå»ºè­°ä½¿ç”¨å°ˆæ¥­äººå·¥ç¿»è­¯ã€‚æˆ‘å€‘å°å› ä½¿ç”¨æ­¤ç¿»è­¯è€Œå¼•èµ·çš„ä»»ä½•èª¤è§£æˆ–èª¤é‡‹ä¸æ‰¿æ“”è²¬ä»»ã€‚