# D·ª± √°n Ti·ªán √≠ch Tr√¨nh duy·ªát Ph·∫ßn 3: T√¨m hi·ªÉu v·ªÅ Nhi·ªám v·ª• N·ªÅn v√† Hi·ªáu su·∫•t

```mermaid
journey
    title Your Performance Optimization Journey
    section Foundation
      Learn browser tools: 3: Student
      Understand profiling: 4: Student
      Identify bottlenecks: 4: Student
    section Extension Features
      Build color system: 4: Student
      Create background tasks: 5: Student
      Update icons dynamically: 5: Student
    section Optimization
      Monitor performance: 5: Student
      Debug issues: 4: Student
      Polish experience: 5: Student
```

B·∫°n c√≥ bao gi·ªù th·∫Øc m·∫Øc t·∫°i sao m·ªôt s·ªë ti·ªán √≠ch tr√¨nh duy·ªát l·∫°i ho·∫°t ƒë·ªông nhanh nh·∫°y v√† ph·∫£n h·ªìi t·ªët, trong khi nh·ªØng ti·ªán √≠ch kh√°c l·∫°i ch·∫≠m ch·∫°p? B√≠ quy·∫øt n·∫±m ·ªü nh·ªØng g√¨ ƒëang di·ªÖn ra ph√≠a sau. Trong khi ng∆∞·ªùi d√πng nh·∫•p chu·ªôt xung quanh giao di·ªán ti·ªán √≠ch c·ªßa b·∫°n, c√≥ c·∫£ m·ªôt th·∫ø gi·ªõi c√°c quy tr√¨nh n·ªÅn ƒëang √¢m th·∫ßm qu·∫£n l√Ω vi·ªác l·∫•y d·ªØ li·ªáu, c·∫≠p nh·∫≠t bi·ªÉu t∆∞·ª£ng v√† t√†i nguy√™n h·ªá th·ªëng.

ƒê√¢y l√† b√†i h·ªçc cu·ªëi c√πng trong lo·∫°t b√†i v·ªÅ ti·ªán √≠ch tr√¨nh duy·ªát, v√† ch√∫ng ta s·∫Ω l√†m cho c√¥ng c·ª• theo d√µi d·∫•u ch√¢n carbon c·ªßa b·∫°n ho·∫°t ƒë·ªông m∆∞·ª£t m√†. B·∫°n s·∫Ω th√™m c√°c c·∫≠p nh·∫≠t bi·ªÉu t∆∞·ª£ng ƒë·ªông v√† h·ªçc c√°ch ph√°t hi·ªán c√°c v·∫•n ƒë·ªÅ v·ªÅ hi·ªáu su·∫•t tr∆∞·ªõc khi ch√∫ng tr·ªü th√†nh v·∫•n ƒë·ªÅ l·ªõn. N√≥ gi·ªëng nh∆∞ vi·ªác ƒëi·ªÅu ch·ªânh m·ªôt chi·∫øc xe ƒëua - nh·ªØng t·ªëi ∆∞u h√≥a nh·ªè c√≥ th·ªÉ t·∫°o ra s·ª± kh√°c bi·ªát l·ªõn trong c√°ch m·ªçi th·ª© ho·∫°t ƒë·ªông.

Khi ho√†n th√†nh, b·∫°n s·∫Ω c√≥ m·ªôt ti·ªán √≠ch ƒë∆∞·ª£c ho√†n thi·ªán v√† hi·ªÉu r√µ c√°c nguy√™n t·∫Øc hi·ªáu su·∫•t gi√∫p ph√¢n bi·ªát gi·ªØa ·ª©ng d·ª•ng web t·ªët v√† ·ª©ng d·ª•ng web tuy·ªát v·ªùi. H√£y c√πng kh√°m ph√° th·∫ø gi·ªõi t·ªëi ∆∞u h√≥a tr√¨nh duy·ªát.

## C√¢u h·ªèi tr∆∞·ªõc b√†i h·ªçc

[Quiz tr∆∞·ªõc b√†i h·ªçc](https://ff-quizzes.netlify.app/web/quiz/27)

### Gi·ªõi thi·ªáu

Trong c√°c b√†i h·ªçc tr∆∞·ªõc, b·∫°n ƒë√£ x√¢y d·ª±ng m·ªôt bi·ªÉu m·∫´u, k·∫øt n·ªëi n√≥ v·ªõi API, v√† x·ª≠ l√Ω vi·ªác l·∫•y d·ªØ li·ªáu kh√¥ng ƒë·ªìng b·ªô. Ti·ªán √≠ch c·ªßa b·∫°n ƒëang d·∫ßn h√¨nh th√†nh m·ªôt c√°ch t·ªët ƒë·∫πp.

B√¢y gi·ªù ch√∫ng ta c·∫ßn th√™m nh·ªØng chi ti·∫øt cu·ªëi c√πng - nh∆∞ l√†m cho bi·ªÉu t∆∞·ª£ng ti·ªán √≠ch thay ƒë·ªïi m√†u s·∫Øc d·ª±a tr√™n d·ªØ li·ªáu carbon. ƒêi·ªÅu n√†y l√†m t√¥i nh·ªõ ƒë·∫øn c√°ch NASA ph·∫£i t·ªëi ∆∞u h√≥a m·ªçi h·ªá th·ªëng tr√™n t√†u v≈© tr·ª• Apollo. H·ªç kh√¥ng th·ªÉ l√£ng ph√≠ b·∫•t k·ª≥ chu k·ª≥ hay b·ªô nh·ªõ n√†o v√¨ hi·ªáu su·∫•t quy·∫øt ƒë·ªãnh ƒë·∫øn s·ª± s·ªëng c√≤n. M·∫∑c d√π ti·ªán √≠ch tr√¨nh duy·ªát c·ªßa ch√∫ng ta kh√¥ng quan tr·ªçng ƒë·∫øn m·ª©c ƒë√≥, nh∆∞ng c√°c nguy√™n t·∫Øc t∆∞∆°ng t·ª± v·∫´n √°p d·ª•ng - m√£ hi·ªáu qu·∫£ t·∫°o ra tr·∫£i nghi·ªám ng∆∞·ªùi d√πng t·ªët h∆°n.

```mermaid
mindmap
  root((Performance & Background Tasks))
    Browser Performance
      Rendering Pipeline
      Asset Optimization
      DOM Manipulation
      JavaScript Execution
    Profiling Tools
      Developer Tools
      Performance Tab
      Timeline Analysis
      Bottleneck Detection
    Extension Architecture
      Background Scripts
      Content Scripts
      Message Passing
      Icon Management
    Optimization Strategies
      Code Splitting
      Lazy Loading
      Caching
      Resource Compression
    Visual Feedback
      Dynamic Icons
      Color Coding
      Real-time Updates
      User Experience
```

## Nh·ªØng ƒëi·ªÅu c∆° b·∫£n v·ªÅ hi·ªáu su·∫•t web

Khi m√£ c·ªßa b·∫°n ch·∫°y hi·ªáu qu·∫£, m·ªçi ng∆∞·ªùi th·ª±c s·ª± *c·∫£m nh·∫≠n* ƒë∆∞·ª£c s·ª± kh√°c bi·ªát. B·∫°n bi·∫øt kho·∫£nh kh·∫Øc khi m·ªôt trang t·∫£i ngay l·∫≠p t·ª©c ho·∫∑c m·ªôt ho·∫°t ·∫£nh ch·∫°y m∆∞·ª£t m√†? ƒê√≥ l√† hi·ªáu su·∫•t t·ªët ƒëang ho·∫°t ƒë·ªông.

Hi·ªáu su·∫•t kh√¥ng ch·ªâ l√† v·ªÅ t·ªëc ƒë·ªô - n√≥ l√† v·ªÅ vi·ªác t·∫°o ra tr·∫£i nghi·ªám web t·ª± nhi√™n thay v√¨ c·ªìng k·ªÅnh v√† g√¢y kh√≥ ch·ªãu. V√†o nh·ªØng ng√†y ƒë·∫ßu c·ªßa m√°y t√≠nh, Grace Hopper n·ªïi ti·∫øng gi·ªØ m·ªôt nanosecond (m·ªôt ƒëo·∫°n d√¢y d√†i kho·∫£ng m·ªôt foot) tr√™n b√†n l√†m vi·ªác ƒë·ªÉ minh h·ªça kho·∫£ng c√°ch √°nh s√°ng ƒëi ƒë∆∞·ª£c trong m·ªôt ph·∫ßn t·ª∑ gi√¢y. ƒê√≥ l√† c√°ch b√† gi·∫£i th√≠ch t·∫°i sao m·ªói microsecond ƒë·ªÅu quan tr·ªçng trong t√≠nh to√°n. H√£y kh√°m ph√° c√°c c√¥ng c·ª• ƒëi·ªÅu tra gi√∫p b·∫°n t√¨m ra ƒëi·ªÅu g√¨ ƒëang l√†m ch·∫≠m m·ªçi th·ª©.

> "Hi·ªáu su·∫•t trang web l√† v·ªÅ hai ƒëi·ªÅu: t·ªëc ƒë·ªô t·∫£i trang v√† t·ªëc ƒë·ªô ch·∫°y m√£ tr√™n ƒë√≥." -- [Zack Grossbart](https://www.smashingmagazine.com/2012/06/javascript-profiling-chrome-developer-tools/)

Ch·ªß ƒë·ªÅ v·ªÅ c√°ch l√†m cho trang web c·ªßa b·∫°n nhanh ch√≥ng tr√™n m·ªçi lo·∫°i thi·∫øt b·ªã, cho m·ªçi lo·∫°i ng∆∞·ªùi d√πng, trong m·ªçi t√¨nh hu·ªëng, kh√¥ng ng·∫°c nhi√™n l√† r·∫•t r·ªông l·ªõn. D∆∞·ªõi ƒë√¢y l√† m·ªôt s·ªë ƒëi·ªÉm c·∫ßn l∆∞u √Ω khi b·∫°n x√¢y d·ª±ng m·ªôt d·ª± √°n web ti√™u chu·∫©n ho·∫∑c ti·ªán √≠ch tr√¨nh duy·ªát.

B∆∞·ªõc ƒë·∫ßu ti√™n trong vi·ªác t·ªëi ∆∞u h√≥a trang web c·ªßa b·∫°n l√† hi·ªÉu nh·ªØng g√¨ th·ª±c s·ª± ƒëang di·ªÖn ra b√™n trong. May m·∫Øn thay, tr√¨nh duy·ªát c·ªßa b·∫°n ƒëi k√®m v·ªõi c√°c c√¥ng c·ª• ƒëi·ªÅu tra m·∫°nh m·∫Ω ƒë∆∞·ª£c t√≠ch h·ª£p s·∫µn.

```mermaid
flowchart LR
    A[HTML] --> B[Parse]
    B --> C[DOM Tree]
    D[CSS] --> E[Parse]
    E --> F[CSSOM]
    G[JavaScript] --> H[Execute]
    
    C --> I[Render Tree]
    F --> I
    H --> I
    
    I --> J[Layout]
    J --> K[Paint]
    K --> L[Composite]
    L --> M[Display]
    
    subgraph "Critical Rendering Path"
        N["1. Parse HTML"]
        O["2. Parse CSS"]
        P["3. Execute JS"]
        Q["4. Build Render Tree"]
        R["5. Layout Elements"]
        S["6. Paint Pixels"]
        T["7. Composite Layers"]
    end
    
    style M fill:#e8f5e8
    style I fill:#fff3e0
    style H fill:#ffebee
```

ƒê·ªÉ m·ªü Developer Tools trong Edge, nh·∫•p v√†o ba d·∫•u ch·∫•m ·ªü g√≥c tr√™n b√™n ph·∫£i, sau ƒë√≥ ƒëi ƒë·∫øn More Tools > Developer Tools. Ho·∫∑c s·ª≠ d·ª•ng ph√≠m t·∫Øt: `Ctrl` + `Shift` + `I` tr√™n Windows ho·∫∑c `Option` + `Command` + `I` tr√™n Mac. Khi ƒë√£ ·ªü ƒë√≥, nh·∫•p v√†o tab Performance - ƒë√¢y l√† n∆°i b·∫°n s·∫Ω th·ª±c hi·ªán ƒëi·ªÅu tra.

**B·ªô c√¥ng c·ª• ƒëi·ªÅu tra hi·ªáu su·∫•t c·ªßa b·∫°n:**
- **M·ªü** Developer Tools (b·∫°n s·∫Ω s·ª≠ d·ª•ng ch√∫ng li√™n t·ª•c nh∆∞ m·ªôt nh√† ph√°t tri·ªÉn!)
- **ƒêi ƒë·∫øn** tab Performance - nghƒ© v·ªÅ n√≥ nh∆∞ m√°y theo d√µi s·ª©c kh·ªèe c·ªßa ·ª©ng d·ª•ng web c·ªßa b·∫°n
- **Nh·∫•n** n√∫t Record v√† xem trang c·ªßa b·∫°n ho·∫°t ƒë·ªông
- **Nghi√™n c·ª©u** k·∫øt qu·∫£ ƒë·ªÉ ph√°t hi·ªán ƒëi·ªÅu g√¨ ƒëang l√†m ch·∫≠m m·ªçi th·ª©

H√£y th·ª≠ ƒëi·ªÅu n√†y. M·ªü m·ªôt trang web (Microsoft.com ho·∫°t ƒë·ªông t·ªët cho vi·ªác n√†y) v√† nh·∫•p v√†o n√∫t 'Record'. B√¢y gi·ªù l√†m m·ªõi trang v√† xem profiler ghi l·∫°i m·ªçi th·ª© x·∫£y ra. Khi b·∫°n d·ª´ng ghi, b·∫°n s·∫Ω th·∫•y m·ªôt ph√¢n t√≠ch chi ti·∫øt v·ªÅ c√°ch tr√¨nh duy·ªát 'scripts', 'renders', v√† 'paints' trang web. N√≥ l√†m t√¥i nh·ªõ ƒë·∫øn c√°ch trung t√¢m ƒëi·ªÅu khi·ªÉn gi√°m s√°t m·ªçi h·ªá th·ªëng trong m·ªôt l·∫ßn ph√≥ng t√™n l·ª≠a - b·∫°n nh·∫≠n ƒë∆∞·ª£c d·ªØ li·ªáu th·ªùi gian th·ª±c v·ªÅ ch√≠nh x√°c nh·ªØng g√¨ ƒëang x·∫£y ra v√† khi n√†o.

![Edge profiler](../../../../translated_images/vi/profiler.5a4a62479c5df01c.webp)

‚úÖ [T√†i li·ªáu Microsoft](https://docs.microsoft.com/microsoft-edge/devtools-guide/performance/?WT.mc_id=academic-77807-sagibbon) c√≥ r·∫•t nhi·ªÅu chi ti·∫øt n·∫øu b·∫°n mu·ªën t√¨m hi·ªÉu s√¢u h∆°n

> M·∫πo chuy√™n nghi·ªáp: X√≥a b·ªô nh·ªõ cache c·ªßa tr√¨nh duy·ªát tr∆∞·ªõc khi ki·ªÉm tra ƒë·ªÉ xem trang web c·ªßa b·∫°n ho·∫°t ƒë·ªông nh∆∞ th·∫ø n√†o ƒë·ªëi v·ªõi kh√°ch truy c·∫≠p l·∫ßn ƒë·∫ßu - th∆∞·ªùng r·∫•t kh√°c so v·ªõi nh·ªØng l·∫ßn truy c·∫≠p l·∫°i!

Ch·ªçn c√°c ph·∫ßn c·ªßa d√≤ng th·ªùi gian profile ƒë·ªÉ ph√≥ng to c√°c s·ª± ki·ªán x·∫£y ra trong khi trang c·ªßa b·∫°n t·∫£i.

L·∫•y m·ªôt ·∫£nh ch·ª•p nhanh v·ªÅ hi·ªáu su·∫•t trang c·ªßa b·∫°n b·∫±ng c√°ch ch·ªçn m·ªôt ph·∫ßn c·ªßa d√≤ng th·ªùi gian profile v√† nh√¨n v√†o b·∫£ng t√≥m t·∫Øt:

![Edge profiler snapshot](../../../../translated_images/vi/snapshot.97750180ebcad737.webp)

Ki·ªÉm tra b·∫£ng Event Log ƒë·ªÉ xem li·ªáu c√≥ s·ª± ki·ªán n√†o m·∫•t h∆°n 15 ms:

![Edge event log](../../../../translated_images/vi/log.804026979f3707e0.webp)

‚úÖ L√†m quen v·ªõi profiler c·ªßa b·∫°n! M·ªü c√¥ng c·ª• d√†nh cho nh√† ph√°t tri·ªÉn tr√™n trang n√†y v√† xem li·ªáu c√≥ b·∫•t k·ª≥ n√∫t th·∫Øt n√†o kh√¥ng. T√†i nguy√™n n√†o t·∫£i ch·∫≠m nh·∫•t? Nhanh nh·∫•t?

```mermaid
flowchart TD
    A[Open DevTools] --> B[Navigate to Performance Tab]
    B --> C[Click Record Button]
    C --> D[Perform Actions]
    D --> E[Stop Recording]
    E --> F{Analyze Results}
    
    F --> G[Check Timeline]
    F --> H[Review Network]
    F --> I[Examine Scripts]
    F --> J[Identify Paint Events]
    
    G --> K{Long Tasks?}
    H --> L{Large Assets?}
    I --> M{Render Blocking?}
    J --> N{Expensive Paints?}
    
    K -->|Yes| O[Optimize JavaScript]
    L -->|Yes| P[Compress Assets]
    M -->|Yes| Q[Add Async/Defer]
    N -->|Yes| R[Simplify Styles]
    
    O --> S[Test Again]
    P --> S
    Q --> S
    R --> S
    
    style A fill:#e1f5fe
    style F fill:#fff3e0
    style S fill:#e8f5e8
```

## Nh·ªØng ƒëi·ªÅu c·∫ßn t√¨m khi s·ª≠ d·ª•ng profiler

Ch·∫°y profiler ch·ªâ l√† b∆∞·ªõc ƒë·∫ßu ti√™n - k·ªπ nƒÉng th·ª±c s·ª± l√† bi·∫øt nh·ªØng bi·ªÉu ƒë·ªì ƒë·∫ßy m√†u s·∫Øc ƒë√≥ th·ª±c s·ª± ƒëang n√≥i g√¨ v·ªõi b·∫°n. ƒê·ª´ng lo, b·∫°n s·∫Ω quen v·ªõi vi·ªác ƒë·ªçc ch√∫ng. C√°c nh√† ph√°t tri·ªÉn c√≥ kinh nghi·ªám ƒë√£ h·ªçc c√°ch ph√°t hi·ªán c√°c d·∫•u hi·ªáu c·∫£nh b√°o tr∆∞·ªõc khi ch√∫ng tr·ªü th√†nh v·∫•n ƒë·ªÅ l·ªõn.

H√£y n√≥i v·ªÅ nh·ªØng k·∫ª g√¢y r·∫Øc r·ªëi th∆∞·ªùng g·∫∑p - nh·ªØng v·∫•n ƒë·ªÅ v·ªÅ hi·ªáu su·∫•t th∆∞·ªùng l·∫ªn v√†o c√°c d·ª± √°n web. Gi·ªëng nh∆∞ c√°ch Marie Curie ph·∫£i c·∫©n th·∫≠n theo d√µi m·ª©c ƒë·ªô ph√≥ng x·∫° trong ph√≤ng th√≠ nghi·ªám c·ªßa m√¨nh, ch√∫ng ta c·∫ßn theo d√µi m·ªôt s·ªë m·∫´u nh·∫•t ƒë·ªãnh cho th·∫•y v·∫•n ƒë·ªÅ ƒëang h√¨nh th√†nh. Ph√°t hi·ªán s·ªõm s·∫Ω gi√∫p b·∫°n (v√† ng∆∞·ªùi d√πng c·ªßa b·∫°n) tr√°nh ƒë∆∞·ª£c nhi·ªÅu s·ª± kh√≥ ch·ªãu.

**K√≠ch th∆∞·ªõc t√†i nguy√™n**: C√°c trang web ng√†y c√†ng tr·ªü n√™n "n·∫∑ng" h∆°n qua c√°c nƒÉm, v√† ph·∫ßn l·ªõn tr·ªçng l∆∞·ª£ng th√™m ƒë√≥ ƒë·∫øn t·ª´ h√¨nh ·∫£nh. N√≥ gi·ªëng nh∆∞ ch√∫ng ta ƒëang nh·ªìi nh√©t ng√†y c√†ng nhi·ªÅu v√†o vali k·ªπ thu·∫≠t s·ªë c·ªßa m√¨nh.

‚úÖ Xem [Internet Archive](https://httparchive.org/reports/page-weight) ƒë·ªÉ th·∫•y k√≠ch th∆∞·ªõc trang ƒë√£ tƒÉng l√™n nh∆∞ th·∫ø n√†o theo th·ªùi gian - r·∫•t ƒë√°ng ƒë·ªÉ kh√°m ph√°.

**C√°ch gi·ªØ t√†i nguy√™n c·ªßa b·∫°n ƒë∆∞·ª£c t·ªëi ∆∞u h√≥a:**
- **N√©n** h√¨nh ·∫£nh! C√°c ƒë·ªãnh d·∫°ng hi·ªán ƒë·∫°i nh∆∞ WebP c√≥ th·ªÉ gi·∫£m k√≠ch th∆∞·ªõc t·ªáp ƒë√°ng k·ªÉ
- **Cung c·∫•p** k√≠ch th∆∞·ªõc h√¨nh ·∫£nh ph√π h·ª£p cho t·ª´ng thi·∫øt b·ªã - kh√¥ng c·∫ßn g·ª≠i h√¨nh ·∫£nh l·ªõn cho ƒëi·ªán tho·∫°i
- **Gi·∫£m thi·ªÉu** CSS v√† JavaScript - t·ª´ng byte ƒë·ªÅu quan tr·ªçng
- **S·ª≠ d·ª•ng** lazy loading ƒë·ªÉ h√¨nh ·∫£nh ch·ªâ t·∫£i xu·ªëng khi ng∆∞·ªùi d√πng th·ª±c s·ª± cu·ªôn ƒë·∫øn ch√∫ng

**DOM traversals**: Tr√¨nh duy·ªát ph·∫£i x√¢y d·ª±ng M√¥ h√¨nh ƒê·ªëi t∆∞·ª£ng T√†i li·ªáu (DOM) d·ª±a tr√™n m√£ b·∫°n vi·∫øt, v√¨ v·∫≠y ƒë·ªÉ c√≥ hi·ªáu su·∫•t trang t·ªët, h√£y gi·ªØ c√°c th·∫ª c·ªßa b·∫°n ·ªü m·ª©c t·ªëi thi·ªÉu, ch·ªâ s·ª≠ d·ª•ng v√† ƒë·ªãnh ki·ªÉu nh·ªØng g√¨ trang c·∫ßn. ƒê·∫øn ƒëi·ªÉm n√†y, CSS d∆∞ th·ª´a li√™n quan ƒë·∫øn m·ªôt trang c√≥ th·ªÉ ƒë∆∞·ª£c t·ªëi ∆∞u h√≥a; c√°c ki·ªÉu ch·ªâ c·∫ßn s·ª≠ d·ª•ng tr√™n m·ªôt trang kh√¥ng c·∫ßn ph·∫£i ƒë∆∞·ª£c bao g·ªìm trong t·ªáp style ch√≠nh, v√≠ d·ª•.

**Chi·∫øn l∆∞·ª£c ch√≠nh ƒë·ªÉ t·ªëi ∆∞u h√≥a DOM:**
- **Gi·∫£m thi·ªÉu** s·ªë l∆∞·ª£ng ph·∫ßn t·ª≠ HTML v√† m·ª©c ƒë·ªô l·ªìng gh√©p
- **Lo·∫°i b·ªè** c√°c quy t·∫Øc CSS kh√¥ng s·ª≠ d·ª•ng v√† h·ª£p nh·∫•t c√°c t·ªáp stylesheet m·ªôt c√°ch hi·ªáu qu·∫£
- **T·ªï ch·ª©c** CSS ƒë·ªÉ ch·ªâ t·∫£i nh·ªØng g√¨ c·∫ßn thi·∫øt cho m·ªói trang
- **C·∫•u tr√∫c** HTML m·ªôt c√°ch c√≥ √Ω nghƒ©a ƒë·ªÉ tr√¨nh duy·ªát ph√¢n t√≠ch t·ªët h∆°n

**JavaScript**: M·ªói nh√† ph√°t tri·ªÉn JavaScript n√™n ch√∫ √Ω ƒë·∫øn c√°c script 'render-blocking' ph·∫£i ƒë∆∞·ª£c t·∫£i tr∆∞·ªõc khi ph·∫ßn c√≤n l·∫°i c·ªßa DOM c√≥ th·ªÉ ƒë∆∞·ª£c duy·ªát v√† v·∫Ω l√™n tr√¨nh duy·ªát. H√£y c√¢n nh·∫Øc s·ª≠ d·ª•ng `defer` v·ªõi c√°c script n·ªôi tuy·∫øn c·ªßa b·∫°n (nh∆∞ ƒë√£ l√†m trong module Terrarium).

**K·ªπ thu·∫≠t t·ªëi ∆∞u h√≥a JavaScript hi·ªán ƒë·∫°i:**
- **S·ª≠ d·ª•ng** thu·ªôc t√≠nh `defer` ƒë·ªÉ t·∫£i script sau khi ph√¢n t√≠ch DOM
- **Th·ª±c hi·ªán** code splitting ƒë·ªÉ ch·ªâ t·∫£i JavaScript c·∫ßn thi·∫øt
- **√Åp d·ª•ng** lazy loading cho c√°c ch·ª©c nƒÉng kh√¥ng quan tr·ªçng
- **Gi·∫£m thi·ªÉu** vi·ªác s·ª≠ d·ª•ng c√°c th∆∞ vi·ªán v√† framework n·∫∑ng khi c√≥ th·ªÉ

‚úÖ Th·ª≠ m·ªôt s·ªë trang web tr√™n [Trang ki·ªÉm tra t·ªëc ƒë·ªô trang web](https://www.webpagetest.org/) ƒë·ªÉ t√¨m hi·ªÉu th√™m v·ªÅ c√°c ki·ªÉm tra ph·ªï bi·∫øn ƒë∆∞·ª£c th·ª±c hi·ªán ƒë·ªÉ x√°c ƒë·ªãnh hi·ªáu su·∫•t trang web.

### üîÑ **Ki·ªÉm tra s∆∞ ph·∫°m**
**Hi·ªÉu bi·∫øt v·ªÅ hi·ªáu su·∫•t**: Tr∆∞·ªõc khi x√¢y d·ª±ng c√°c t√≠nh nƒÉng ti·ªán √≠ch, h√£y ƒë·∫£m b·∫£o b·∫°n c√≥ th·ªÉ:
- ‚úÖ Gi·∫£i th√≠ch ƒë∆∞·ªùng d·∫´n render quan tr·ªçng t·ª´ HTML ƒë·∫øn pixel
- ‚úÖ X√°c ƒë·ªãnh c√°c n√∫t th·∫Øt hi·ªáu su·∫•t ph·ªï bi·∫øn trong ·ª©ng d·ª•ng web
- ‚úÖ S·ª≠ d·ª•ng c√¥ng c·ª• d√†nh cho nh√† ph√°t tri·ªÉn tr√¨nh duy·ªát ƒë·ªÉ profile hi·ªáu su·∫•t trang
- ‚úÖ Hi·ªÉu c√°ch k√≠ch th∆∞·ªõc t√†i nguy√™n v√† ƒë·ªô ph·ª©c t·∫°p c·ªßa DOM ·∫£nh h∆∞·ªüng ƒë·∫øn t·ªëc ƒë·ªô

**Ki·ªÉm tra nhanh b·∫£n th√¢n**: ƒêi·ªÅu g√¨ x·∫£y ra khi b·∫°n c√≥ JavaScript render-blocking?
*Tr·∫£ l·ªùi: Tr√¨nh duy·ªát ph·∫£i t·∫£i xu·ªëng v√† th·ª±c thi script tr∆∞·ªõc khi c√≥ th·ªÉ ti·∫øp t·ª•c ph√¢n t√≠ch HTML v√† render trang*

**T√°c ƒë·ªông hi·ªáu su·∫•t th·ª±c t·∫ø**:
- **ƒê·ªô tr·ªÖ 100ms**: Ng∆∞·ªùi d√πng nh·∫≠n th·∫•y s·ª± ch·∫≠m tr·ªÖ
- **ƒê·ªô tr·ªÖ 1 gi√¢y**: Ng∆∞·ªùi d√πng b·∫Øt ƒë·∫ßu m·∫•t t·∫≠p trung
- **ƒê·ªô tr·ªÖ 3+ gi√¢y**: 40% ng∆∞·ªùi d√πng b·ªè trang
- **M·∫°ng di ƒë·ªông**: Hi·ªáu su·∫•t c√†ng quan tr·ªçng h∆°n

B√¢y gi·ªù b·∫°n ƒë√£ c√≥ √Ω t∆∞·ªüng v·ªÅ c√°ch tr√¨nh duy·ªát render c√°c t√†i nguy√™n b·∫°n g·ª≠i ƒë·∫øn n√≥, h√£y xem nh·ªØng ƒëi·ªÅu cu·ªëi c√πng b·∫°n c·∫ßn l√†m ƒë·ªÉ ho√†n th√†nh ti·ªán √≠ch c·ªßa m√¨nh:

### T·∫°o m·ªôt h√†m ƒë·ªÉ t√≠nh to√°n m√†u s·∫Øc

B√¢y gi·ªù ch√∫ng ta s·∫Ω t·∫°o m·ªôt h√†m chuy·ªÉn d·ªØ li·ªáu s·ªë th√†nh m√†u s·∫Øc c√≥ √Ω nghƒ©a. H√£y nghƒ© v·ªÅ n√≥ nh∆∞ m·ªôt h·ªá th·ªëng ƒë√®n giao th√¥ng - m√†u xanh l√° c√¢y cho nƒÉng l∆∞·ª£ng s·∫°ch, m√†u ƒë·ªè cho c∆∞·ªùng ƒë·ªô carbon cao.

H√†m n√†y s·∫Ω l·∫•y d·ªØ li·ªáu CO2 t·ª´ API c·ªßa ch√∫ng ta v√† x√°c ƒë·ªãnh m√†u s·∫Øc n√†o t·ªët nh·∫•t ƒë·∫°i di·ªán cho t√°c ƒë·ªông m√¥i tr∆∞·ªùng. N√≥ gi·ªëng nh∆∞ c√°ch c√°c nh√† khoa h·ªçc s·ª≠ d·ª•ng m√£ m√†u trong b·∫£n ƒë·ªì nhi·ªát ƒë·ªÉ h√¨nh dung c√°c m·∫´u d·ªØ li·ªáu ph·ª©c t·∫°p - t·ª´ nhi·ªát ƒë·ªô ƒë·∫°i d∆∞∆°ng ƒë·∫øn s·ª± h√¨nh th√†nh sao. H√£y th√™m ƒëi·ªÅu n√†y v√†o `/src/index.js`, ngay sau c√°c bi·∫øn `const` m√† ch√∫ng ta ƒë√£ thi·∫øt l·∫≠p tr∆∞·ªõc ƒë√≥:

```mermaid
flowchart LR
    A[CO2 Value] --> B[Find Closest Scale Point]
    B --> C[Get Scale Index]
    C --> D[Map to Color]
    D --> E[Send to Background]
    
    subgraph "Color Scale"
        F["0-150: Green (Clean)"]
        G["150-600: Yellow (Moderate)"]
        H["600-750: Orange (High)"]
        I["750+: Brown (Very High)"]
    end
    
    subgraph "Message Passing"
        J[Content Script]
        K[chrome.runtime.sendMessage]
        L[Background Script]
        M[Icon Update]
    end
    
    style A fill:#e1f5fe
    style D fill:#e8f5e8
    style E fill:#fff3e0
```

```javascript
function calculateColor(value) {
	// Define CO2 intensity scale (grams per kWh)
	const co2Scale = [0, 150, 600, 750, 800];
	// Corresponding colors from green (clean) to dark brown (high carbon)
	const colors = ['#2AA364', '#F5EB4D', '#9E4229', '#381D02', '#381D02'];

	// Find the closest scale value to our input
	const closestNum = co2Scale.sort((a, b) => {
		return Math.abs(a - value) - Math.abs(b - value);
	})[0];
	
	console.log(`${value} is closest to ${closestNum}`);
	
	// Find the index for color mapping
	const num = (element) => element > closestNum;
	const scaleIndex = co2Scale.findIndex(num);

	const closestColor = colors[scaleIndex];
	console.log(scaleIndex, closestColor);

	// Send color update message to background script
	chrome.runtime.sendMessage({ action: 'updateIcon', value: { color: closestColor } });
}
```

**H√£y ph√¢n t√≠ch h√†m nh·ªè th√¥ng minh n√†y:**
- **Thi·∫øt l·∫≠p** hai m·∫£ng - m·ªôt cho m·ª©c CO2, m·ªôt cho m√†u s·∫Øc (xanh l√° c√¢y = s·∫°ch, n√¢u = b·∫©n!)
- **T√¨m** k·∫øt qu·∫£ g·∫ßn nh·∫•t v·ªõi gi√° tr·ªã CO2 th·ª±c t·∫ø c·ªßa ch√∫ng ta b·∫±ng c√°ch s·ª≠ d·ª•ng m·ªôt s·ªë s·∫Øp x·∫øp m·∫£ng th√¥ng minh
- **L·∫•y** m√†u s·∫Øc ph√π h·ª£p b·∫±ng ph∆∞∆°ng ph√°p findIndex()
- **G·ª≠i** m·ªôt th√¥ng ƒëi·ªáp ƒë·∫øn script n·ªÅn c·ªßa Chrome v·ªõi m√†u s·∫Øc ƒë√£ ch·ªçn
- **S·ª≠ d·ª•ng** template literals (nh·ªØng d·∫•u backtick) ƒë·ªÉ ƒë·ªãnh d·∫°ng chu·ªói g·ªçn g√†ng h∆°n
- **Gi·ªØ** m·ªçi th·ª© ƒë∆∞·ª£c t·ªï ch·ª©c v·ªõi c√°c khai b√°o const

API `chrome.runtime` [API](https://developer.chrome.com/extensions/runtime) gi·ªëng nh∆∞ h·ªá th·∫ßn kinh c·ªßa ti·ªán √≠ch c·ªßa b·∫°n - n√≥ x·ª≠ l√Ω t·∫•t c·∫£ c√°c giao ti·∫øp v√† nhi·ªám v·ª• ph√≠a sau:

> "S·ª≠ d·ª•ng API chrome.runtime ƒë·ªÉ truy xu·∫•t trang n·ªÅn, tr·∫£ v·ªÅ chi ti·∫øt v·ªÅ manifest, v√† l·∫Øng nghe c≈©ng nh∆∞ ph·∫£n h·ªìi c√°c s·ª± ki·ªán trong v√≤ng ƒë·ªùi ·ª©ng d·ª•ng ho·∫∑c ti·ªán √≠ch. B·∫°n c≈©ng c√≥ th·ªÉ s·ª≠ d·ª•ng API n√†y ƒë·ªÉ chuy·ªÉn ƒë·ªïi ƒë∆∞·ªùng d·∫´n t∆∞∆°ng ƒë·ªëi c·ªßa URL th√†nh URL ƒë·∫ßy ƒë·ªß."

**T·∫°i sao API Chrome Runtime l·∫°i h·ªØu √≠ch:**
- **Cho ph√©p** c√°c ph·∫ßn kh√°c nhau c·ªßa ti·ªán √≠ch c·ªßa b·∫°n giao ti·∫øp v·ªõi nhau
- **X·ª≠ l√Ω** c√¥ng vi·ªác n·ªÅn m√† kh√¥ng l√†m ƒë√≥ng bƒÉng giao di·ªán ng∆∞·ªùi d√πng
- **Qu·∫£n l√Ω** c√°c s·ª± ki·ªán v√≤ng ƒë·ªùi c·ªßa ti·ªán √≠ch c·ªßa b·∫°n
- **L√†m cho** vi·ªác truy·ªÅn th√¥ng ƒëi·ªáp gi·ªØa c√°c script tr·ªü n√™n d·ªÖ d√†ng

‚úÖ N·∫øu b·∫°n ƒëang ph√°t tri·ªÉn ti·ªán √≠ch tr√¨nh duy·ªát n√†y cho Edge, c√≥ th·ªÉ b·∫°n s·∫Ω ng·∫°c nhi√™n khi th·∫•y r·∫±ng b·∫°n ƒëang s·ª≠ d·ª•ng API chrome. C√°c phi√™n b·∫£n tr√¨nh duy·ªát Edge m·ªõi h∆°n ch·∫°y tr√™n engine tr√¨nh duy·ªát Chromium, v√¨ v·∫≠y b·∫°n c√≥ th·ªÉ t·∫≠n d·ª•ng c√°c c√¥ng c·ª• n√†y.

```mermaid
architecture-beta
    group browser(logos:chrome)[Browser]
    
    service popup(logos:html5)[Popup UI] in browser
    service content(logos:javascript)[Content Script] in browser
    service background(database)[Background Script] in browser
    service api(logos:api)[External API] in browser
    
    popup:R -- L:content
    content:R -- L:background
    background:T -- B:api
    content:T -- B:api
    
    junction junctionCenter in browser
    popup:R -- L:junctionCenter
    junctionCenter:R -- L:background
```

> **M·∫πo chuy√™n nghi·ªáp**: N·∫øu b·∫°n mu·ªën profile m·ªôt ti·ªán √≠ch tr√¨nh duy·ªát, h√£y m·ªü c√¥ng c·ª• d√†nh cho nh√† ph√°t tri·ªÉn t·ª´ ch√≠nh ti·ªán √≠ch ƒë√≥, v√¨ n√≥ l√† m·ªôt phi√™n b·∫£n tr√¨nh duy·ªát ri√™ng bi·ªát. ƒêi·ªÅu n√†y cung c·∫•p cho b·∫°n c√°c s·ªë li·ªáu hi·ªáu su·∫•t c·ª• th·ªÉ c·ªßa ti·ªán √≠ch.

### ƒê·∫∑t m√†u bi·ªÉu t∆∞·ª£ng m·∫∑c ƒë·ªãnh

Tr∆∞·ªõc khi ch√∫ng ta b·∫Øt ƒë·∫ßu l·∫•y d·ªØ li·ªáu th·ª±c, h√£y cung c·∫•p cho ti·ªán √≠ch c·ªßa ch√∫ng ta m·ªôt ƒëi·ªÉm kh·ªüi ƒë·∫ßu. Kh√¥ng ai th√≠ch nh√¨n v√†o m·ªôt bi·ªÉu t∆∞·ª£ng tr·ªëng ho·∫∑c tr√¥ng nh∆∞ b·ªã l·ªói. Ch√∫ng ta s·∫Ω b·∫Øt ƒë·∫ßu v·ªõi m√†u xanh l√° c√¢y ƒë·ªÉ ng∆∞·ªùi d√πng bi·∫øt ti·ªán √≠ch ƒëang ho·∫°t ƒë·ªông ngay t·ª´ l√∫c h·ªç c√†i ƒë·∫∑t.

Trong h√†m `init()` c·ªßa b·∫°n, h√£y thi·∫øt l·∫≠p m√†u bi·ªÉu t∆∞·ª£ng xanh l√° c√¢y m·∫∑c ƒë·ªãnh:

```javascript
chrome.runtime.sendMessage({
	action: 'updateIcon',
	value: {
		color: 'green',
	},
});
```

**Nh·ªØng g√¨ kh·ªüi t·∫°o n√†y ƒë·∫°t ƒë∆∞·ª£c:**
- **ƒê·∫∑t** m√†u xanh l√° c√¢y trung t√≠nh l√†m tr·∫°ng th√°i m·∫∑c ƒë·ªãnh
- **Cung c·∫•p** ph·∫£n h·ªìi tr·ª±c quan ngay l·∫≠p t·ª©c khi ti·ªán √≠ch t·∫£i
- **Thi·∫øt l·∫≠p** m√¥ h√¨nh giao ti·∫øp v·ªõi script n·ªÅn
- **ƒê·∫£m b·∫£o** ng∆∞·ªùi d√πng th·∫•y m·ªôt ti·ªán √≠ch ho·∫°t ƒë·ªông tr∆∞·ªõc khi d·ªØ li·ªáu t·∫£i

### G·ªçi h√†m, th·ª±c thi l·ªánh g·ªçi

B√¢y gi·ªù h√£y k·∫øt n·ªëi m·ªçi th·ª© l·∫°i v·ªõi nhau ƒë·ªÉ khi d·ªØ li·ªáu CO2 m·ªõi ƒë∆∞·ª£c c·∫≠p nh·∫≠t, bi·ªÉu t∆∞·ª£ng c·ªßa b·∫°n t·ª± ƒë·ªông c·∫≠p nh·∫≠t v·ªõi m√†u s·∫Øc ph√π h·ª£p. N√≥ gi·ªëng nh∆∞ k·∫øt n·ªëi m·∫°ch cu·ªëi c√πng trong m·ªôt thi·∫øt b·ªã ƒëi·ªán t·ª≠ - ƒë·ªôt nhi√™n t·∫•t c·∫£ c√°c th√†nh ph·∫ßn ri√™ng l·∫ª ho·∫°t ƒë·ªông nh∆∞ m·ªôt h·ªá th·ªëng.

Th√™m d√≤ng n√†y ngay sau khi b·∫°n l·∫•y d·ªØ li·ªáu CO2 t·ª´ API:

```javascript
// After retrieving CO2 data from the API
// let CO2 = data.data[0].intensity.actual;
calculateColor(CO2);
```

**S·ª± t√≠ch h·ª£p n√†y ƒë·∫°t ƒë∆∞·ª£c:**
- **K·∫øt n·ªëi** lu·ªìng d·ªØ li·ªáu API v·ªõi h·ªá th·ªëng ch·ªâ b√°o tr·ª±c quan
- **K√≠ch ho·∫°t** c·∫≠p nh·∫≠t bi·ªÉu t∆∞·ª£ng t·ª± ƒë·ªông khi d·ªØ li·ªáu m·ªõi ƒë·∫øn
- **ƒê·∫£m b·∫£o** ph·∫£n h·ªìi tr·ª±c quan theo th·ªùi gian th·ª±c d·ª±a tr√™n c∆∞·ªùng ƒë·ªô carbon hi·ªán t·∫°i
- **Duy tr√¨** s·ª± ph√¢n t√°ch gi·ªØa vi·ªác l·∫•y d·ªØ li·ªáu v√† logic hi·ªÉn th·ªã

V√† cu·ªëi c√πng, trong `/dist/background.js`, th√™m tr√¨nh l·∫Øng nghe cho c√°c cu·ªôc g·ªçi h√†nh ƒë·ªông n·ªÅn n√†y:

```javascript
// Listen for messages from the content script
chrome.runtime.onMessage.addListener(function (msg, sender, sendResponse) {
	if (msg.action === 'updateIcon') {
		chrome.action.setIcon({ imageData: drawIcon(msg.value) });
	}
});

// Draw dynamic icon using Canvas API
// Borrowed from energy lollipop extension - nice feature!
function drawIcon(value) {
	// Create an offscreen canvas for better performance
	const canvas = new OffscreenCanvas(200, 200);
	const context = canvas.getContext('2d');

	// Draw a colored circle representing carbon intensity
	context.beginPath();
	context.fillStyle = value.color;
	context.arc(100, 100, 50, 0, 2 * Math.PI);
	context.fill();

	// Return the image data for the browser icon
	return context.getImageData(50, 50, 100, 100);
}
```

**ƒê√¢y l√† nh·ªØng g√¨ script n·ªÅn n√†y l√†m:**
- **L·∫Øng nghe** c√°c th√¥ng ƒëi·ªáp t·ª´ script ch√≠nh c·ªßa b·∫°n (nh∆∞ m·ªôt l·ªÖ t√¢n nh·∫≠n cu·ªôc g·ªçi)
- **X·ª≠ l√Ω** c√°c y√™u c·∫ßu 'updateIcon' ƒë·ªÉ thay ƒë·ªïi bi·ªÉu t∆∞·ª£ng thanh c√¥ng c·ª• c·ªßa b·∫°n
- **T·∫°o** c√°c bi·ªÉu t∆∞·ª£ng m·ªõi ngay l·∫≠p t·ª©c b·∫±ng c√°ch s·ª≠ d·ª•ng Canvas API
- **V·∫Ω** m·ªôt v√≤ng tr√≤n m√†u ƒë∆°n gi·∫£n hi·ªÉn th·ªã c∆∞·ªùng ƒë·ªô carbon hi·ªán t·∫°i
- **C·∫≠p nh·∫≠t** thanh c√¥ng c·ª• tr√¨nh duy·ªát c·ªßa b·∫°n v·ªõi bi·ªÉu t∆∞·ª£ng m·ªõi
- **S·ª≠ d·ª•ng** OffscreenCanvas ƒë·ªÉ c√≥ hi·ªáu su·∫•t m∆∞·ª£t m√† (kh√¥ng l√†m ƒë√≥ng bƒÉng giao di·ªán ng∆∞·ªùi d√πng)

‚úÖ B·∫°n s·∫Ω t√¨m hi·ªÉu th√™m v·ªÅ Canvas API trong [b√†i h·ªçc Tr√≤ ch∆°i Kh√¥ng gian](../../6-space-game/2-drawing-to-canvas/README.md).

```mermaid
sequenceDiagram
    participant CS as Content Script
    participant BG as Background Script
    participant Canvas as OffscreenCanvas
    participant Browser as Browser Icon
    
    CS->>BG: sendMessage({action: 'updateIcon', color})
    BG->>Canvas: new OffscreenCanvas(200, 200)
    Canvas->>Canvas: getContext('2d')
    Canvas->>Canvas: beginPath() + fillStyle + arc()
    Canvas->>Canvas: fill() + getImageData()
    Canvas->>BG: Return image data
    BG->>Browser: chrome.action.setIcon(imageData)
    Browser->>Browser: Update toolbar icon
```

### üîÑ **Ki·ªÉm tra s∆∞ ph·∫°m**
**Hi·ªÉu bi·∫øt ho√†n ch·ªânh v·ªÅ ti·ªán √≠ch**: X√°c minh s·ª± th√†nh th·∫°o c·ªßa b·∫°n v·ªÅ to√†n b·ªô h·ªá th·ªëng:
- ‚úÖ L√†m th·∫ø n√†o ƒë·ªÉ truy·ªÅn th√¥ng ƒëi·ªáp gi·ªØa c√°c script ti·ªán √≠ch kh√°c nhau?
- ‚úÖ T·∫°i sao ch√∫ng ta s·ª≠ d·ª•ng OffscreenCanvas thay v√¨ Canvas th√¥ng th∆∞·ªùng ƒë·ªÉ c·∫£i thi·ªán hi·ªáu su·∫•t?
- ‚úÖ Vai tr√≤ c·ªßa Chrome Runtime API trong ki·∫øn tr√∫c ti·ªán √≠ch m·ªü r·ªông l√† g√¨?
- ‚úÖ Thu·∫≠t to√°n t√≠nh to√°n m√†u s·∫Øc √°nh x·∫° d·ªØ li·ªáu th√†nh ph·∫£n h·ªìi tr·ª±c quan nh∆∞ th·∫ø n√†o?

**C√¢n nh·∫Øc v·ªÅ hi·ªáu su·∫•t**: Ti·ªán √≠ch m·ªü r·ªông c·ªßa b·∫°n hi·ªán th·ªÉ hi·ªán:
- **Giao ti·∫øp hi·ªáu qu·∫£**: Li√™n l·∫°c r√µ r√†ng gi·ªØa c√°c ng·ªØ c·∫£nh script
- **T·ªëi ∆∞u h√≥a hi·ªÉn th·ªã**: OffscreenCanvas ngƒÉn ch·∫∑n vi·ªác ch·∫∑n giao di·ªán ng∆∞·ªùi d√πng
- **C·∫≠p nh·∫≠t theo th·ªùi gian th·ª±c**: Bi·ªÉu t∆∞·ª£ng thay ƒë·ªïi ƒë·ªông d·ª±a tr√™n d·ªØ li·ªáu tr·ª±c ti·∫øp
- **Qu·∫£n l√Ω b·ªô nh·ªõ**: D·ªçn d·∫πp v√† x·ª≠ l√Ω t√†i nguy√™n ƒë√∫ng c√°ch

**ƒê√£ ƒë·∫øn l√∫c ki·ªÉm tra ti·ªán √≠ch m·ªü r·ªông c·ªßa b·∫°n:**
- **X√¢y d·ª±ng** m·ªçi th·ª© v·ªõi `npm run build`
- **T·∫£i l·∫°i** ti·ªán √≠ch m·ªü r·ªông c·ªßa b·∫°n trong tr√¨nh duy·ªát (ƒë·ª´ng qu√™n b∆∞·ªõc n√†y)
- **M·ªü** ti·ªán √≠ch m·ªü r·ªông c·ªßa b·∫°n v√† xem bi·ªÉu t∆∞·ª£ng thay ƒë·ªïi m√†u s·∫Øc
- **Ki·ªÉm tra** c√°ch n√≥ ph·∫£n h·ªìi v·ªõi d·ªØ li·ªáu carbon th·ª±c t·∫ø t·ª´ kh·∫Øp n∆°i tr√™n th·∫ø gi·ªõi

Gi·ªù ƒë√¢y, b·∫°n s·∫Ω bi·∫øt ngay li·ªáu c√≥ ph·∫£i th·ªùi ƒëi·ªÉm t·ªët ƒë·ªÉ gi·∫∑t ƒë·ªì hay n√™n ch·ªù ƒë·ª£i nƒÉng l∆∞·ª£ng s·∫°ch h∆°n. B·∫°n v·ª´a x√¢y d·ª±ng m·ªôt th·ª© th·ª±c s·ª± h·ªØu √≠ch v√† h·ªçc ƒë∆∞·ª£c v·ªÅ hi·ªáu su·∫•t tr√¨nh duy·ªát trong qu√° tr√¨nh n√†y.

## Th·ª≠ th√°ch GitHub Copilot Agent üöÄ

S·ª≠ d·ª•ng ch·∫ø ƒë·ªô Agent ƒë·ªÉ ho√†n th√†nh th·ª≠ th√°ch sau:

**M√¥ t·∫£:** N√¢ng cao kh·∫£ nƒÉng gi√°m s√°t hi·ªáu su·∫•t c·ªßa ti·ªán √≠ch m·ªü r·ªông tr√¨nh duy·ªát b·∫±ng c√°ch th√™m t√≠nh nƒÉng theo d√µi v√† hi·ªÉn th·ªã th·ªùi gian t·∫£i cho c√°c th√†nh ph·∫ßn kh√°c nhau c·ªßa ti·ªán √≠ch m·ªü r·ªông.

**Y√™u c·∫ßu:** T·∫°o m·ªôt h·ªá th·ªëng gi√°m s√°t hi·ªáu su·∫•t cho ti·ªán √≠ch m·ªü r·ªông tr√¨nh duy·ªát, ƒëo l∆∞·ªùng v√† ghi l·∫°i th·ªùi gian l·∫•y d·ªØ li·ªáu CO2 t·ª´ API, t√≠nh to√°n m√†u s·∫Øc, v√† c·∫≠p nh·∫≠t bi·ªÉu t∆∞·ª£ng. Th√™m m·ªôt h√†m g·ªçi l√† `performanceTracker` s·ª≠ d·ª•ng Performance API ƒë·ªÉ ƒëo c√°c ho·∫°t ƒë·ªông n√†y v√† hi·ªÉn th·ªã k·∫øt qu·∫£ trong console tr√¨nh duy·ªát v·ªõi d·∫•u th·ªùi gian v√† c√°c th√¥ng s·ªë th·ªùi gian.

T√¨m hi·ªÉu th√™m v·ªÅ [ch·∫ø ƒë·ªô agent](https://code.visualstudio.com/blogs/2025/02/24/introducing-copilot-agent-mode) t·∫°i ƒë√¢y.

## üöÄ Th·ª≠ th√°ch

ƒê√¢y l√† m·ªôt nhi·ªám v·ª• th√°m t·ª≠ th√∫ v·ªã: ch·ªçn m·ªôt v√†i trang web m√£ ngu·ªìn m·ªü ƒë√£ t·ªìn t·∫°i nhi·ªÅu nƒÉm (nh∆∞ Wikipedia, GitHub, ho·∫∑c Stack Overflow) v√† t√¨m hi·ªÉu l·ªãch s·ª≠ commit c·ªßa ch√∫ng. B·∫°n c√≥ th·ªÉ ph√°t hi·ªán n∆°i h·ªç ƒë√£ c·∫£i thi·ªán hi·ªáu su·∫•t kh√¥ng? Nh·ªØng v·∫•n ƒë·ªÅ n√†o th∆∞·ªùng xuy√™n xu·∫•t hi·ªán?

**C√°ch ti·∫øp c·∫≠n ƒëi·ªÅu tra c·ªßa b·∫°n:**
- **T√¨m ki·∫øm** c√°c th√¥ng ƒëi·ªáp commit v·ªõi t·ª´ kh√≥a nh∆∞ "t·ªëi ∆∞u h√≥a," "hi·ªáu su·∫•t," ho·∫∑c "nhanh h∆°n"
- **Quan s√°t** c√°c m·∫´u - h·ªç c√≥ th∆∞·ªùng xuy√™n s·ª≠a c√πng lo·∫°i v·∫•n ƒë·ªÅ kh√¥ng?
- **X√°c ƒë·ªãnh** c√°c nguy√™n nh√¢n ph·ªï bi·∫øn l√†m ch·∫≠m trang web
- **Chia s·∫ª** nh·ªØng g√¨ b·∫°n kh√°m ph√° - c√°c nh√† ph√°t tri·ªÉn kh√°c h·ªçc h·ªèi t·ª´ c√°c v√≠ d·ª• th·ª±c t·∫ø

## C√¢u h·ªèi sau b√†i gi·∫£ng

[C√¢u h·ªèi sau b√†i gi·∫£ng](https://ff-quizzes.netlify.app/web/quiz/28)

## √în t·∫≠p & T·ª± h·ªçc

H√£y c√¢n nh·∫Øc ƒëƒÉng k√Ω m·ªôt [b·∫£n tin v·ªÅ hi·ªáu su·∫•t](https://perf.email/)

Kh√°m ph√° m·ªôt s·ªë c√°ch m√† tr√¨nh duy·ªát ƒë√°nh gi√° hi·ªáu su·∫•t web b·∫±ng c√°ch xem qua c√°c tab hi·ªáu su·∫•t trong c√¥ng c·ª• web c·ªßa ch√∫ng. B·∫°n c√≥ t√¨m th·∫•y s·ª± kh√°c bi·ªát l·ªõn n√†o kh√¥ng?

### ‚ö° **Nh·ªØng vi·ªác b·∫°n c√≥ th·ªÉ l√†m trong 5 ph√∫t t·ªõi**
- [ ] M·ªü Tr√¨nh qu·∫£n l√Ω t√°c v·ª• c·ªßa tr√¨nh duy·ªát (Shift+Esc trong Chrome) ƒë·ªÉ xem m·ª©c s·ª≠ d·ª•ng t√†i nguy√™n c·ªßa ti·ªán √≠ch m·ªü r·ªông
- [ ] S·ª≠ d·ª•ng tab Hi·ªáu su·∫•t c·ªßa DevTools ƒë·ªÉ ghi l·∫°i v√† ph√¢n t√≠ch hi·ªáu su·∫•t trang web
- [ ] Ki·ªÉm tra trang Ti·ªán √≠ch m·ªü r·ªông c·ªßa tr√¨nh duy·ªát ƒë·ªÉ xem ti·ªán √≠ch n√†o ·∫£nh h∆∞·ªüng ƒë·∫øn th·ªùi gian kh·ªüi ƒë·ªông
- [ ] Th·ª≠ t·∫°m th·ªùi v√¥ hi·ªáu h√≥a c√°c ti·ªán √≠ch m·ªü r·ªông ƒë·ªÉ xem s·ª± kh√°c bi·ªát v·ªÅ hi·ªáu su·∫•t

### üéØ **Nh·ªØng g√¨ b·∫°n c√≥ th·ªÉ ho√†n th√†nh trong gi·ªù t·ªõi**
- [ ] Ho√†n th√†nh b√†i ki·ªÉm tra sau b√†i h·ªçc v√† hi·ªÉu c√°c kh√°i ni·ªám v·ªÅ hi·ªáu su·∫•t
- [ ] Tri·ªÉn khai m·ªôt script n·ªÅn cho ti·ªán √≠ch m·ªü r·ªông tr√¨nh duy·ªát c·ªßa b·∫°n
- [ ] H·ªçc c√°ch s·ª≠ d·ª•ng browser.alarms cho c√°c t√°c v·ª• n·ªÅn hi·ªáu qu·∫£
- [ ] Th·ª±c h√†nh truy·ªÅn th√¥ng ƒëi·ªáp gi·ªØa c√°c script n·ªôi dung v√† script n·ªÅn
- [ ] ƒêo l∆∞·ªùng v√† t·ªëi ∆∞u h√≥a m·ª©c s·ª≠ d·ª•ng t√†i nguy√™n c·ªßa ti·ªán √≠ch m·ªü r·ªông c·ªßa b·∫°n

### üìÖ **H√†nh tr√¨nh hi·ªáu su·∫•t k√©o d√†i m·ªôt tu·∫ßn c·ªßa b·∫°n**
- [ ] Ho√†n th√†nh m·ªôt ti·ªán √≠ch m·ªü r·ªông tr√¨nh duy·ªát hi·ªáu su·∫•t cao v·ªõi ch·ª©c nƒÉng n·ªÅn
- [ ] L√†m ch·ªß service workers v√† ki·∫øn tr√∫c ti·ªán √≠ch m·ªü r·ªông hi·ªán ƒë·∫°i
- [ ] Tri·ªÉn khai c√°c chi·∫øn l∆∞·ª£c ƒë·ªìng b·ªô h√≥a v√† l∆∞u tr·ªØ d·ªØ li·ªáu hi·ªáu qu·∫£
- [ ] H·ªçc c√°c k·ªπ thu·∫≠t g·ª° l·ªói n√¢ng cao cho hi·ªáu su·∫•t ti·ªán √≠ch m·ªü r·ªông
- [ ] T·ªëi ∆∞u h√≥a ti·ªán √≠ch m·ªü r·ªông c·ªßa b·∫°n c·∫£ v·ªÅ ch·ª©c nƒÉng l·∫´n hi·ªáu qu·∫£ t√†i nguy√™n
- [ ] T·∫°o c√°c b√†i ki·ªÉm tra to√†n di·ªán cho c√°c k·ªãch b·∫£n hi·ªáu su·∫•t ti·ªán √≠ch m·ªü r·ªông

### üåü **S·ª± th√†nh th·∫°o t·ªëi ∆∞u h√≥a k√©o d√†i m·ªôt th√°ng c·ªßa b·∫°n**
- [ ] X√¢y d·ª±ng c√°c ti·ªán √≠ch m·ªü r·ªông tr√¨nh duy·ªát c·∫•p doanh nghi·ªáp v·ªõi hi·ªáu su·∫•t t·ªëi ∆∞u
- [ ] T√¨m hi·ªÉu v·ªÅ Web Workers, Service Workers, v√† hi·ªáu su·∫•t web hi·ªán ƒë·∫°i
- [ ] ƒê√≥ng g√≥p cho c√°c d·ª± √°n m√£ ngu·ªìn m·ªü t·∫≠p trung v√†o t·ªëi ∆∞u h√≥a hi·ªáu su·∫•t
- [ ] L√†m ch·ªß c√°c n·ªôi b·ªô tr√¨nh duy·ªát v√† k·ªπ thu·∫≠t g·ª° l·ªói n√¢ng cao
- [ ] T·∫°o c√°c c√¥ng c·ª• gi√°m s√°t hi·ªáu su·∫•t v√† h∆∞·ªõng d·∫´n th·ª±c h√†nh t·ªët nh·∫•t
- [ ] Tr·ªü th√†nh chuy√™n gia hi·ªáu su·∫•t gi√∫p t·ªëi ∆∞u h√≥a c√°c ·ª©ng d·ª•ng web

## üéØ L·ªô tr√¨nh th√†nh th·∫°o ti·ªán √≠ch m·ªü r·ªông tr√¨nh duy·ªát c·ªßa b·∫°n

```mermaid
timeline
    title Complete Extension Development Progression
    
    section Performance Fundamentals (20 minutes)
        Browser Profiling: DevTools mastery
                         : Timeline analysis
                         : Bottleneck identification
                         : Critical rendering path
        
    section Background Tasks (25 minutes)
        Extension Architecture: Message passing
                              : Background scripts
                              : Runtime API usage
                              : Cross-context communication
        
    section Visual Feedback (30 minutes)
        Dynamic UI: Color calculation algorithms
                  : Canvas API integration
                  : Icon generation
                  : Real-time updates
        
    section Performance Optimization (35 minutes)
        Efficient Code: Async operations
                      : Memory management
                      : Resource cleanup
                      : Performance monitoring
        
    section Production Ready (45 minutes)
        Polish & Testing: Cross-browser compatibility
                        : Error handling
                        : User experience
                        : Performance validation
        
    section Advanced Features (1 week)
        Extension Ecosystem: Chrome Web Store
                           : User feedback
                           : Analytics integration
                           : Update management
        
    section Professional Development (2 weeks)
        Enterprise Extensions: Team collaboration
                             : Code reviews
                             : CI/CD pipelines
                             : Security audits
        
    section Expert Mastery (1 month)
        Platform Expertise: Advanced Chrome APIs
                          : Performance optimization
                          : Architecture patterns
                          : Open source contribution
```

### üõ†Ô∏è B·ªô c√¥ng c·ª• ph√°t tri·ªÉn ti·ªán √≠ch m·ªü r·ªông ho√†n ch·ªânh c·ªßa b·∫°n

Sau khi ho√†n th√†nh b·ªô ba n√†y, b·∫°n ƒë√£ l√†m ch·ªß:
- **Ki·∫øn tr√∫c tr√¨nh duy·ªát**: Hi·ªÉu s√¢u v·ªÅ c√°ch ti·ªán √≠ch m·ªü r·ªông t√≠ch h·ª£p v·ªõi h·ªá th·ªëng tr√¨nh duy·ªát
- **Ph√¢n t√≠ch hi·ªáu su·∫•t**: Kh·∫£ nƒÉng x√°c ƒë·ªãnh v√† s·ª≠a c√°c ƒëi·ªÉm ngh·∫Ωn b·∫±ng c√¥ng c·ª• d√†nh cho nh√† ph√°t tri·ªÉn
- **L·∫≠p tr√¨nh b·∫•t ƒë·ªìng b·ªô**: C√°c m·∫´u JavaScript hi·ªán ƒë·∫°i cho c√°c ho·∫°t ƒë·ªông kh√¥ng ch·∫∑n
- **T√≠ch h·ª£p API**: L·∫•y d·ªØ li·ªáu b√™n ngo√†i v·ªõi x√°c th·ª±c v√† x·ª≠ l√Ω l·ªói
- **Thi·∫øt k·∫ø tr·ª±c quan**: C·∫≠p nh·∫≠t giao di·ªán ng∆∞·ªùi d√πng ƒë·ªông v√† t·∫°o ƒë·ªì h·ªça d·ª±a tr√™n Canvas
- **Truy·ªÅn th√¥ng ƒëi·ªáp**: Giao ti·∫øp gi·ªØa c√°c script trong ki·∫øn tr√∫c ti·ªán √≠ch m·ªü r·ªông
- **Tr·∫£i nghi·ªám ng∆∞·ªùi d√πng**: Tr·∫°ng th√°i t·∫£i, x·ª≠ l√Ω l·ªói, v√† t∆∞∆°ng t√°c tr·ª±c quan
- **K·ªπ nƒÉng s·∫£n xu·∫•t**: Ki·ªÉm tra, g·ª° l·ªói, v√† t·ªëi ∆∞u h√≥a ƒë·ªÉ tri·ªÉn khai th·ª±c t·∫ø

**·ª®ng d·ª•ng th·ª±c t·∫ø**: K·ªπ nƒÉng ph√°t tri·ªÉn ti·ªán √≠ch m·ªü r·ªông c·ªßa b·∫°n √°p d·ª•ng tr·ª±c ti·∫øp v√†o:
- **·ª®ng d·ª•ng web ti·∫øn b·ªô**: Ki·∫øn tr√∫c v√† m·∫´u hi·ªáu su·∫•t t∆∞∆°ng t·ª±
- **·ª®ng d·ª•ng desktop Electron**: ·ª®ng d·ª•ng ƒëa n·ªÅn t·∫£ng s·ª≠ d·ª•ng c√¥ng ngh·ªá web
- **·ª®ng d·ª•ng di ƒë·ªông lai**: Ph√°t tri·ªÉn Cordova/PhoneGap s·ª≠ d·ª•ng API web
- **·ª®ng d·ª•ng web doanh nghi·ªáp**: C√¥ng c·ª• b·∫£ng ƒëi·ªÅu khi·ªÉn ph·ª©c t·∫°p v√† nƒÉng su·∫•t
- **Ti·ªán √≠ch m·ªü r·ªông Chrome DevTools**: C√¥ng c·ª• d√†nh cho nh√† ph√°t tri·ªÉn v√† g·ª° l·ªói n√¢ng cao
- **T√≠ch h·ª£p API web**: B·∫•t k·ª≥ ·ª©ng d·ª•ng n√†o giao ti·∫øp v·ªõi d·ªãch v·ª• b√™n ngo√†i

**T√°c ƒë·ªông chuy√™n nghi·ªáp**: Gi·ªù ƒë√¢y b·∫°n c√≥ th·ªÉ:
- **X√¢y d·ª±ng** ti·ªán √≠ch m·ªü r·ªông tr√¨nh duy·ªát s·∫µn s√†ng s·∫£n xu·∫•t t·ª´ √Ω t∆∞·ªüng ƒë·∫øn tri·ªÉn khai
- **T·ªëi ∆∞u h√≥a** hi·ªáu su·∫•t ·ª©ng d·ª•ng web b·∫±ng c√°ch s·ª≠ d·ª•ng c√°c c√¥ng c·ª• ph√¢n t√≠ch ti√™u chu·∫©n ng√†nh
- **Ki·∫øn tr√∫c** h·ªá th·ªëng c√≥ kh·∫£ nƒÉng m·ªü r·ªông v·ªõi s·ª± ph√¢n t√°ch h·ª£p l√Ω
- **G·ª° l·ªói** c√°c ho·∫°t ƒë·ªông b·∫•t ƒë·ªìng b·ªô ph·ª©c t·∫°p v√† giao ti·∫øp gi·ªØa c√°c ng·ªØ c·∫£nh
- **ƒê√≥ng g√≥p** cho c√°c d·ª± √°n ti·ªán √≠ch m·ªü r·ªông m√£ ngu·ªìn m·ªü v√† ti√™u chu·∫©n tr√¨nh duy·ªát

**C∆° h·ªôi c·∫•p ƒë·ªô ti·∫øp theo**:
- **Nh√† ph√°t tri·ªÉn Chrome Web Store**: Xu·∫•t b·∫£n ti·ªán √≠ch m·ªü r·ªông cho h√†ng tri·ªáu ng∆∞·ªùi d√πng
- **K·ªπ s∆∞ hi·ªáu su·∫•t web**: Chuy√™n v·ªÅ t·ªëi ∆∞u h√≥a v√† tr·∫£i nghi·ªám ng∆∞·ªùi d√πng
- **Nh√† ph√°t tri·ªÉn n·ªÅn t·∫£ng tr√¨nh duy·ªát**: ƒê√≥ng g√≥p v√†o ph√°t tri·ªÉn engine tr√¨nh duy·ªát
- **Ng∆∞·ªùi t·∫°o khung ti·ªán √≠ch m·ªü r·ªông**: X√¢y d·ª±ng c√¥ng c·ª• gi√∫p c√°c nh√† ph√°t tri·ªÉn kh√°c
- **Quan h·ªá nh√† ph√°t tri·ªÉn**: Chia s·∫ª ki·∫øn th·ª©c th√¥ng qua gi·∫£ng d·∫°y v√† t·∫°o n·ªôi dung

üåü **Th√†nh t·ª±u ƒë√£ ƒë·∫°t ƒë∆∞·ª£c**: B·∫°n ƒë√£ x√¢y d·ª±ng m·ªôt ti·ªán √≠ch m·ªü r·ªông tr√¨nh duy·ªát ho√†n ch·ªânh, ch·ª©c nƒÉng, th·ªÉ hi·ªán c√°c th·ª±c h√†nh ph√°t tri·ªÉn chuy√™n nghi·ªáp v√† ti√™u chu·∫©n web hi·ªán ƒë·∫°i!

## B√†i t·∫≠p

[Ph√¢n t√≠ch m·ªôt trang web v·ªÅ hi·ªáu su·∫•t](assignment.md)

---

**Tuy√™n b·ªë mi·ªÖn tr·ª´ tr√°ch nhi·ªám**:  
T√†i li·ªáu n√†y ƒë√£ ƒë∆∞·ª£c d·ªãch b·∫±ng d·ªãch v·ª• d·ªãch thu·∫≠t AI [Co-op Translator](https://github.com/Azure/co-op-translator). M·∫∑c d√π ch√∫ng t√¥i c·ªë g·∫Øng ƒë·∫£m b·∫£o ƒë·ªô ch√≠nh x√°c, xin l∆∞u √Ω r·∫±ng c√°c b·∫£n d·ªãch t·ª± ƒë·ªông c√≥ th·ªÉ ch·ª©a l·ªói ho·∫∑c kh√¥ng ch√≠nh x√°c. T√†i li·ªáu g·ªëc b·∫±ng ng√¥n ng·ªØ b·∫£n ƒë·ªãa n√™n ƒë∆∞·ª£c coi l√† ngu·ªìn th√¥ng tin ch√≠nh x√°c nh·∫•t. ƒê·ªëi v·ªõi th√¥ng tin quan tr·ªçng, khuy·∫øn ngh·ªã s·ª≠ d·ª•ng d·ªãch v·ª• d·ªãch thu·∫≠t chuy√™n nghi·ªáp b·ªüi con ng∆∞·ªùi. Ch√∫ng t√¥i kh√¥ng ch·ªãu tr√°ch nhi·ªám cho b·∫•t k·ª≥ s·ª± hi·ªÉu l·∫ßm ho·∫∑c di·ªÖn gi·∫£i sai n√†o ph√°t sinh t·ª´ vi·ªác s·ª≠ d·ª•ng b·∫£n d·ªãch n√†y.