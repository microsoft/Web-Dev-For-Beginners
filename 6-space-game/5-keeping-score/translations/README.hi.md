# рдПрдХ рдЕрдВрддрд░рд┐рдХреНрд╖ рдЦреЗрд▓ рдмрдирд╛рдПрдБ рднрд╛рдЧ рел: рд╕реНрдХреЛрд░рд┐рдВрдЧ рдФрд░ рдЬреАрд╡рди

## рд▓реЗрдХреНрдЯрд░рд╕реЗ рдкрд╣рд▓реЗрдХреА рдХреНрд╡рд┐реЫ

[рд▓реЗрдХреНрдЯрд░рд╕реЗ рдкрд╣рд▓реЗрдХреА рдХреНрд╡рд┐реЫ](https://calm-wave-0d1a32b03.1.azurestaticapps.net/quiz/37?loc=hi)

рдЗрд╕ рдкрд╛рда рдореЗрдВ, рдЖрдк рд╕реАрдЦреЗрдВрдЧреЗ рдХрд┐ рдХрд┐рд╕реА рдЦреЗрд▓ рдореЗрдВ рд╕реНрдХреЛрд░рд┐рдВрдЧ рдХреИрд╕реЗ рдЬреЛрдбрд╝реЗрдВ рдФрд░ рдЬреАрд╡рди рдХреА рдЧрдгрдирд╛ рдХрд░реЗрдВ.

## рд╕реНрдХреНрд░реАрди рдкрд░ рдЯреЗрдХреНрд╕реНрдЯ рдбреНрд░рд╛ рдХрд░реЗрдВ

рд╕реНрдХреНрд░реАрди рдкрд░ рдЧреЗрдо рд╕реНрдХреЛрд░ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдпрд╣ рдЬрд╛рдирдирд╛ рд╣реЛрдЧрд╛ рдХрд┐ рд╕реНрдХреНрд░реАрди рдкрд░ рдЯреЗрдХреНрд╕реНрдЯ рдХреИрд╕реЗ рд░рдЦрд╛ рдЬрд╛рдП. рдЙрддреНрддрд░ рдХреИрдирд╡рд╛рд╕ рдСрдмреНрдЬреЗрдХреНрдЯ рдкрд░ `fillText()` рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣рд╛ рд╣реИред рдЖрдк рдЕрдиреНрдп рдкрд╣рд▓реБрдУрдВ рдХреЛ рднреА рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреИрд╕реЗ рдХрд┐ рдХрд┐рд╕ рдлрд╝реЙрдиреНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реИ, рдкрд╛рда рдХрд╛ рд░рдВрдЧ рдФрд░ рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдЗрд╕рдХреЗ рд╕рдВрд░реЗрдЦрдг (рдмрд╛рдПрдВ, рджрд╛рдПрдВ, рдХреЗрдВрджреНрд░)ред рдиреАрдЪреЗ рдХреБрдЫ рдХреЛрдб рд╣реИ рдЬреЛ рд╕реНрдХреНрд░реАрди рдкрд░ рдХреБрдЫ рдЯреЗрдХреНрд╕реНрдЯ рдЦреАрдВрдЪ рд░рд╣рд╛ рд╣реИ.

```javascript
ctx.font = "30px Arial";
ctx.fillStyle = "red";
ctx.textAlign = "right";
ctx.fillText("show this on the screen", 0, 0);
```

тЬЕ [рдПрдХ рдХреИрдирд╡рд╛рд╕ рдореЗрдВ рдкрд╛рда рдХреИрд╕реЗ рдЬреЛрдбрд╝реЗрдВ](https://developer.mozilla.org/docs/Web/API/Canvas_API/Tutorial/Drawing_text) рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдФрд░ рдкрдврд╝реЗрдВ рдФрд░ рдмреЗрдЭрд┐рдЭрдХ рдЕрдкрдиреЗ рдХреЛ рдЖрдХрд░реНрд╖рдХ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП!

## рдЬреАрд╡рди, рдПрдХ рдЦреЗрд▓ рдЕрд╡рдзрд╛рд░рдгрд╛ рдХреЗ рд░реВрдк рдореЗрдВ

рдПрдХ рдЦреЗрд▓ рдореЗрдВ рдПрдХ рдЬреАрд╡рди рд╣реЛрдиреЗ рдХреА рдЕрд╡рдзрд╛рд░рдгрд╛ рдХреЗрд╡рд▓ рдПрдХ рд╕рдВрдЦреНрдпрд╛ рд╣реИред рдПрдХ рдЕрдВрддрд░рд┐рдХреНрд╖ рдЦреЗрд▓ рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВ рдпрд╣ рд╕рд╛рдорд╛рдиреНрдп рд╣реИ рдХрд┐ рдЖрдкрдХреЗ рдЬрд╣рд╛рдЬ рдХреЛ рдиреБрдХрд╕рд╛рди рд╣реЛрдиреЗ рдкрд░ рдПрдХ-рдПрдХ рдХрд░рдХреЗ рдХрдЯреЗ рд╣реБрдП рдЬреАрд╡рди рдХрд╛ рдПрдХ рд╕реЗрдЯ рдЖрд╡рдВрдЯрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПред рдпрджрд┐ рдЖрдк рдПрдХ рдирдВрдмрд░ рдХреЗ рдмрдЬрд╛рдп рдорд┐рдиреАрд╢рд┐рдк рдпрд╛ рджрд┐рд▓ рдХреА рддрд░рд╣ рдЗрд╕ рдХрд╛ рдПрдХ рдЪрд┐рддреНрд░рдордп рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рджрд┐рдЦрд╛ рд╕рдХрддреЗ рд╣реИрдВ рддреЛ рдЕрдЪреНрдЫрд╛ рд╣реИ.

## рдХреНрдпрд╛ рдмрдирд╛рдирд╛ рд╣реИ

рдЪрд▓реЛ рдЕрдкрдиреЗ рдЦреЗрд▓ рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ:

- **рдЦреЗрд▓ рдХрд╛ рд╕реНрдХреЛрд░**: рдирд╖реНрдЯ рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рдкреНрд░рддреНрдпреЗрдХ рджреБрд╢реНрдорди рдЬрд╣рд╛рдЬ рдХреЗ рд▓рд┐рдП, рдирд╛рдпрдХ рдХреЛ рдХреБрдЫ рдмрд┐рдВрджреБрдУрдВ рд╕реЗ рд╕рдореНрдорд╛рдирд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рд╣рдо рдкреНрд░рддрд┐ рдЬрд╣рд╛рдЬ резрежреж рдЕрдВрдХ рдХрд╛ рд╕реБрдЭрд╛рд╡ рджреЗрддреЗ рд╣реИрдВред рдЦреЗрд▓ рдХрд╛ рд╕реНрдХреЛрд░ рдиреАрдЪреЗ рдмрд╛рдИрдВ рдУрд░ рджрд┐рдЦрд╛рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП.
- **рдЬреАрдмрди**: рдЖрдкрдХреЗ рдЬрд╣рд╛рдЬ рдореЗрдВ рддреАрди рдЬреАрд╡рди рд╣реИрдВред рдЬрдм рднреА рдХреЛрдИ рджреБрд╢реНрдорди рдЬрд╣рд╛рдЬ рдЖрдкрд╕реЗ рдЯрдХрд░рд╛рддрд╛ рд╣реИ рддреЛ рдЖрдк рдПрдХ рдЬреАрд╡рди рдЦреЛ рджреЗрддреЗ рд╣реИрдВред рдПрдХ рдЬреАрд╡рди рд╕реНрдХреЛрд░ рдиреАрдЪреЗ рджрд╛рдИрдВ рдУрд░ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЧреНрд░рд╛рдлрд╝рд┐рдХ рд╕реЗ рдмрд╛рд╣рд░ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП! [рдЬреАрд╡рди рдЫрд╡рд┐](../solution/assets/life.png).

## рдЕрдиреБрд╢рдВрд╕рд┐рдд рдХрджрдо

рдЙрди рдлрд╝рд╛рдЗрд▓реЛрдВ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдПрдБ рдЬреЛ рдЖрдкрдХреЗ рд▓рд┐рдП `your-work` рд╕рдм рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рдмрдирд╛рдИ рдЧрдИ рд╣реИрдВред рдЗрд╕рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╢рд╛рдорд┐рд▓ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП:

```bash
-| assets
  -| enemyShip.png
  -| player.png
  -| laserRed.png
-| index.html
-| app.js
-| package.json
```

рдЖрдк рдЯрд╛рдЗрдк рдХрд░рдХреЗ рдЕрдкрдирд╛ рдкреНрд░реЛрдЬреЗрдХреНрдЯ `your_work` рдлрд╝реЛрд▓реНрдбрд░ рд╢реБрд░реВ рдХрд░реЗрдВ:

```bash
cd your-work
npm start
```

рдЙрдкрд░реЛрдХреНрдд рдкрддреЗ рдкрд░ рдПрдХ HTTP рд╕рд░реНрд╡рд░ рд╢реБрд░реВ рд╣реЛрдЧрд╛ `http://localhost:5000`ред рдПрдХ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдЦреЛрд▓реЗ рдФрд░ рдЙрд╕ рдкрддреЗ рдХреЛ рдбрд╛рд▓реЗ , рдЕрднреА рдЙрд╕реЗ рдирд╛рдпрдХ рдФрд░ рд╕рднреА рджреБрд╢реНрдордиреЛрдВ рдХреЛ рдкреНрд░рд╕реНрддреБрдд рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП, рдФрд░ рдЬреИрд╕реЗ рд╣реА рдЖрдк рдЕрдкрдиреЗ рдмрд╛рдПрдБ рдФрд░ рджрд╛рдПрдБ рддреАрд░ рдорд╛рд░рддреЗ рд╣реИрдВ, рдирд╛рдпрдХ рдЪрд▓рддрд╛ рд╣реИ рдФрд░ рджреБрд╢реНрдордиреЛрдВ рдХреЛ рдорд╛рд░ рд╕рдХрддрд╛ рд╣реИред.

### рдХреЛрдб рдЬреЛреЬреЗ

1. `solution/assets/` рдлрд╝реЛрд▓реНрдбрд░ рд╕реЗ `your-work` рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рдЖрд╡рд╢реНрдпрдХ рдЕрд╕реЗрдЯреНрд╕ рдХреА рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рдмрдирд╛рдПрдБ;рдЖрдк рдПрдХ `life.png` рдПрд╕реЗрдЯ рдЬреЛрдбрд╝ рджреЗрдВрдЧреЗред LifeImg рдХреЛ window.onload рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ:

   ```javascript
   lifeImg = await loadTexture("assets/life.png");
   ```

1. рдЕрд╕реЗрдЯреНрд╕ рдХреА рд╕реВрдЪреА рдореЗрдВ `lifeImg` рдЬреЛрдбрд╝реЗрдВ:

```javascript
let heroImg,
...
lifeImg,
...
eventEmitter = new EventEmitter();
```

1. **рдЪрд░ рдЬреЛрдбрд╝реЗрдВ** рд╡рд╣ рдХреЛрдб рдЬреЛрдбрд╝реЗрдВ рдЬреЛ рдЖрдкрдХреЗ рдХреБрд▓ рд╕реНрдХреЛрд░(0) рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдмрд╛рдИрдВ рдУрд░ (3) рд░рд╣рддрд╛ рд╣реИ, рдЗрди рд╕реНрдХреЛрд░ рдХреЛ рд╕реНрдХреНрд░реАрди рдкрд░ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИ.

1. **`updateGameObjects()` рдлрд╝рдВрдХреНрд╢рди рдмрдврд╝рд╛рдПрдБ**ред рджреБрд╢реНрдорди рдЯрдХрд░рд╛рд╡ рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП `updateGameObjects()` рдлрд╝рдВрдХреНрд╢рди рдмрдврд╝рд╛рдПрдБ:

   ```javascript
   enemies.forEach((enemy) => {
     const heroRect = hero.rectFromGameObject();
     if (intersectRect(heroRect, enemy.rectFromGameObject())) {
       eventEmitter.emit(Messages.COLLISION_ENEMY_HERO, { enemy });
     }
   });
   ```

1. **`life` рдУрд░ `points` рдЬреЛреЬреЗ**.

   1. **рдЖрд░рдВрднрд┐рдХ рдЪрд░**. `рд╣реАрд░реЛ` рд╡рд░реНрдЧ рдореЗрдВ `this.cooldown = 0` рдХреЗ рддрд╣рдд, рдЬреАрд╡рди рдФрд░ рдмрд┐рдВрджреБрдУ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░реЗрдВ:

      ```javascript
      this.life = 3;
      this.points = 0;
      ```

   1. **рд╕реНрдХреНрд░реАрди рдкрд░ рдЪрд░ рдмрдирд╛рдП**. рдЗрди рдореВрд▓реНрдпреЛрдВ рдХреЛ рд╕реНрдХреНрд░реАрди рдкрд░ рдмрдирд╛рдП:

      ```javascript
      function drawLife() {
        // TODO, 35, 27
        const START_POS = canvas.width - 180;
        for (let i = 0; i < hero.life; i++) {
          ctx.drawImage(lifeImg, START_POS + 45 * (i + 1), canvas.height - 37);
        }
      }

      function drawPoints() {
        ctx.font = "30px Arial";
        ctx.fillStyle = "red";
        ctx.textAlign = "left";
        drawText("Points: " + hero.points, 10, canvas.height - 20);
      }

      function drawText(message, x, y) {
        ctx.fillText(message, x, y);
      }
      ```

   1. **рдЧреЗрдо рд▓реВрдк рдХреЗ рддрд░реАрдХреЗ рдЬреЛрдбрд╝реЗрдВ**. рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЖрдк рдЗрди рдЕрдкрдбреЗрдЯреНрд╕ рдХреЛ рдЕрдкрдиреЗ рд╡рд┐рдВрдбреЛ рдореЗрдВ рдЬреЛрдбрд╝реЗрдВред рдлрд╝рдВрдХреНрд╢рди рдХреЛ `updateGameObjects()` рдХреЗ рддрд╣рдд рд▓реЛрдб рдХрд░реЗрдВ:

      ```javascript
      drawPoints();
      drawLife();
      ```

1. **рдЦреЗрд▓ рдХреЗ рдирд┐рдпрдореЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░реЗрдВ**. рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЦреЗрд▓ рдирд┐рдпрдореЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░реЗрдВ:

   1. **рд╣рд░ рд╣реАрд░реЛ рдФрд░ рджреБрд╢реНрдорди рдХреА рдЯрдХреНрдХрд░ рдХреЗ рд▓рд┐рдП**, рдЬреАрд╡рди рдШрдЯрд╛рдП.

      рдЗрд╕ рдХрдЯреМрддреА рдХреЛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП `рд╣реАрд░реЛ` рдХреНрд▓рд╛рд╕ рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд░реЗрдВ:

      ```javascript
      decrementLife() {
        this.life--;
        if (this.life === 0) {
          this.dead = true;
        }
      }
      ```

   2. **рд╣рд░ рд▓реЗрдЬрд░ рдХреЗ рд▓рд┐рдП рдЬреЛ рджреБрд╢реНрдорди рдХреЛ рдорд╛рд░рддрд╛ рд╣реИ**, резрежреж рдЕрдВрдХреЛрдВ рдХреЗ рд╕рд╛рде рдЧреЗрдо рд╕реНрдХреЛрд░ рдмрдврд╝рд╛рддрд╛ рд╣реИ.

      рдЗрд╕ рд╡реЗрддрди рд╡реГрджреНрдзрд┐ рдХреЛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣реАрд░реЛ рдХреНрд▓рд╛рд╕ рдмрдврд╝рд╛рдПрдБ:

      ```javascript
        incrementPoints() {
          this.points += 100;
        }
      ```

      рдЕрдкрдиреЗ рдХреЙрд▓рд┐рд╕рди рдИрд╡реЗрдВрдЯ рдПрдореАрдЯрд░реНрд╕ рдореЗрдВ рдЗрди рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдЬреЛрдбрд╝реЗрдВ:

      ```javascript
      eventEmitter.on(
        Messages.COLLISION_ENEMY_LASER,
        (_, { first, second }) => {
          first.dead = true;
          second.dead = true;
          hero.incrementPoints();
        }
      );

      eventEmitter.on(Messages.COLLISION_ENEMY_HERO, (_, { enemy }) => {
        enemy.dead = true;
        hero.decrementLife();
      });
      ```

тЬЕ рдЬрд╛рд╡рд╛рд╕реНрдХреНрд░рд┐рдкреНрдЯ/рдХреИрдирд╡рд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмрдирд╛рдП рдЧрдП рдЕрдиреНрдп рдЦреЗрд▓реЛрдВ рдХреА рдЦреЛрдЬ рдХреЗ рд▓рд┐рдП рдереЛрдбрд╝рд╛ рд╢реЛрдз рдХрд░реЗрдВред рдЙрдирдХреЗ рд╕рд╛рдорд╛рдиреНрдп рд▓рдХреНрд╖рдг рдХреНрдпрд╛ рд╣реИрдВ?

рдЗрд╕ рдХрд╛рдо рдХреЗ рдЕрдВрдд рддрдХ, рдЖрдкрдХреЛ рдЫреЛрдЯреЗ 'рдЬреАрд╡рди' рдЬрд╣рд╛рдЬреЛрдВ рдХреЛ рдиреАрдЪреЗ рджрд╛рдИрдВ рдУрд░, рдмрд┐рдВрджреБрдУрдВ рдХреЛ рдиреАрдЪреЗ рдмрд╛рдИрдВ рдУрд░ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рд┐рдП, рдФрд░ рдЬрдм рдЖрдк рджреБрд╢реНрдордиреЛрдВ рдХреЛ рдЧреЛрд▓реА рдорд╛рд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рдЕрдкрдиреЗ рдЬреАрд╡рди рдХреА рдЧрд┐рдирддреА рдореЗрдВ рдХрдореА рдФрд░ рджреБрд╢реНрдордиреЛрдВ рд╕реЗ рдЯрдХрд░рд╛рддреЗ рд╣реБрдП рджреЗрдЦрдирд╛ рдЪрд╛рд╣рд┐рдПред рдмрд╣реБрдд рдмрдврд╝рд┐рдпрд╛! рдЖрдкрдХрд╛ рдЦреЗрд▓ рд▓рдЧрднрдЧ рдкреВрд░рд╛ рд╣реЛ рдЧрдпрд╛ рд╣реИ.

---

## ЁЯЪА рдЪреБрдиреЛрддреА

рдЖрдкрдХрд╛ рдХреЛрдб рд▓рдЧрднрдЧ рдкреВрд░рд╛ рд╣реЛ рдЪреБрдХрд╛ рд╣реИред рдХреНрдпрд╛ рдЖрдк рдЕрдкрдиреЗ рдЕрдЧрд▓реЗ рдЪрд░рдгреЛрдВ рдХреА рдХрд▓реНрдкрдирд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ?

## рдкреЛрд╕реНрдЯ-рд╡реНрдпрд╛рдЦреНрдпрд╛рди рдкреНрд░рд╢реНрдиреЛрддреНрддрд░реА

[рдкреЛрд╕реНрдЯ-рд╡реНрдпрд╛рдЦреНрдпрд╛рди рдкреНрд░рд╢реНрдиреЛрддреНрддрд░реА](https://calm-wave-0d1a32b03.1.azurestaticapps.net/quiz/38?loc=hi)

## рд╕рдореАрдХреНрд╖рд╛ рдФрд░ рд╕реНрд╡ рдЕрдзреНрдпрдпрди

рдХреБрдЫ рддрд░реАрдХреЛрдВ рдкрд░ рд╢реЛрдз рдХрд░реЗрдВ рдЬреЛ рдЖрдк рдЦреЗрд▓ рдХреЗ рд╕реНрдХреЛрд░ рдФрд░ рдЬреАрд╡рди рдХреЛ рдмрдврд╝рд╛ рд╕рдХрддреЗ рд╣реИрдВред [PlayFab](https://playfab.com) рдЬреИрд╕реЗ рдХреБрдЫ рджрд┐рд▓рдЪрд╕реНрдк рдЧреЗрдо рдЗрдВрдЬрди рд╣реИрдВред рдЗрдирдореЗрдВ рд╕реЗ рдХрд┐рд╕реА рдПрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╕реЗ рдЖрдкрдХрд╛ рдЦреЗрд▓ рдХреИрд╕реЗ рдмрдврд╝реЗрдЧрд╛?

## рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ

[рдПрдХ рд╕реНрдХреЛрд░рд┐рдВрдЧ рдЧреЗрдо рдмрдирд╛рдПрдБ](assignment.hi.md)
