# рдПрдХ рдЕрдВрддрд░рд┐рдХреНрд╖ рдЦреЗрд▓ рднрд╛рдЧ 3 рдмрдирд╛рдПрдБ: рдЧрддрд┐ рдЬреЛрдбрд╝рдирд╛

## рдкреНрд░реА-рд▓реЗрдХреНрдЪрд░ рдХреНрд╡рд┐рдЬ

[рдкреНрд░реА-рд▓реЗрдХреНрдЪрд░ рдХреНрд╡рд┐рдЬ](https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/33?loc=hi)

рдЬрдм рддрдХ рдЖрдк рдкрд░рджреЗ рдкрд░ рдЪрд╛рд░реЛрдВ рдУрд░ рдПрд▓рд┐рдпрдВрд╕ рдЪрд▓ рд░рд╣реЗ рд╣реИрдВ рддрдм рддрдХ рдЧреЗрдореНрд╕ рдмрд╣реБрдд рдордЬрд╝реЗрджрд╛рд░ рдирд╣реАрдВ рд╣реИрдВ! рдЗрд╕ рдЦреЗрд▓ рдореЗрдВ, рд╣рдо рджреЛ рдкреНрд░рдХрд╛рд░ рдХреЗ рдЖрдВрджреЛрд▓рдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗ:

- **Keyboard/Mouse movement**: рдЬрдм рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕реНрдХреНрд░реАрди рдкрд░ рдХрд┐рд╕реА рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреАрдмреЛрд░реНрдб рдпрд╛ рдорд╛рдЙрд╕ рдХреЗ рд╕рд╛рде рдЗрдВрдЯрд░реИрдХреНрдЯ рдХрд░рддрд╛ рд╣реИ.
- **Game induced movement**: рдЬрдм рдЦреЗрд▓ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рд╕рдордп рдЕрдВрддрд░рд╛рд▓ рдХреЗ рд╕рд╛рде рдПрдХ рд╡рд╕реНрддреБ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рддрд╛ рд╣реИ.

рддреЛ рд╣рдо рдЪреАрдЬреЛрдВ рдХреЛ рд╕реНрдХреНрд░реАрди рдкрд░ рдХреИрд╕реЗ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВ? рдпрд╣ рд╕рдм рдХрд╛рд░реНрддреАрдп рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╣реИ:рд╣рдо рдСрдмреНрдЬреЗрдХреНрдЯ рдХрд╛ рд╕реНрдерд╛рди (x, y) рдмрджрд▓рддреЗ рд╣реИрдВ рдФрд░ рдлрд┐рд░ рд╕реНрдХреНрд░реАрди рдХреЛ рдлрд┐рд░ рд╕реЗ рдЦреЛрд▓рддреЗ рд╣реИрдВред

рдЖрдорддреМрд░ рдкрд░ рдЖрдкрдХреЛ рд╕реНрдХреНрд░реАрди рдкрд░ _рдЧрддрд┐_ рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрди рдЪрд░рдгреЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ:

1. рдПрдХ рд╡рд╕реНрддреБ рдХреЗ рд▓рд┐рдП **рдПрдХ рдирдпрд╛ рд╕реНрдерд╛рди рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░реЗрдВ**; рдпрд╣ рд╡рд╕реНрддреБ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд░реВрдк рдореЗрдВ рдЕрдиреБрднрд╡ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИ.
2. **рд╕реНрдХреНрд░реАрди рдХреЛ рд╕рд╛рдлрд╝ рдХрд░реЗрдВ**, рдбреНрд░реЙ рдХреЗ рдмреАрдЪ рд╕реНрдХреНрд░реАрди рдХреЛ рд╕рд╛рдлрд╝ рдХрд░рдирд╛ рд╣реЛрдЧрд╛. We can clear it by drawing a rectangle that we fill with a background color.
3. рдирдП рд╕реНрдерд╛рди рдкрд░ **Redraw рдСрдмреНрдЬреЗрдХреНрдЯ**ред рдРрд╕рд╛ рдХрд░рдиреЗ рд╕реЗ рд╣рдо рдЕрдВрдд рдореЗрдВ рд╡рд╕реНрддреБ рдХреЛ рдПрдХ рд╕реНрдерд╛рди рд╕реЗ рджреВрд╕рд░реЗ рд╕реНрдерд╛рди рддрдХ рд▓реЗ рдЬрд╛рддреЗ рд╣реИрдВ.

рдпрд╣рд╛рдБ рдпрд╣ рдХреЛрдб рдореЗрдВ рдХреИрд╕рд╛ рджрд┐рдЦ рд╕рдХрддрд╛ рд╣реИ:

```javascript
//set the hero's location
hero.x += 5;
// clear the rectangle that hosts the hero
ctx.clearRect(0, 0, canvas.width, canvas.height);
// redraw the game background and hero
ctx.fillRect(0, 0, canvas.width, canvas.height);
ctx.fillStyle = "black";
ctx.drawImage(heroImg, hero.x, hero.y);
```

тЬЕ рдХреНрдпрд╛ рдЖрдк рдПрдХ рдХрд╛рд░рдг рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реЛрдЪ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдЕрдкрдиреЗ рдирд╛рдпрдХ рдХреЛ рдкреНрд░рддрд┐ рд╕реЗрдХрдВрдб рдХрдИ рдлрд╝реНрд░реЗрдореЛрдВ рдХреЛ рдлрд┐рд░ рд╕реЗ рддреИрдпрд╛рд░ рдХрд░рдиреЗ рд╕реЗ рдкреНрд░рджрд░реНрд╢рди рдХреА рд▓рд╛рдЧрдд рдмрдврд╝ рд╕рдХрддреА рд╣реИ? [рдЗрд╕ рдкреИрдЯрд░реНрди рдХреЗ рд╡рд┐рдХрд▓реНрдк](https://www.html5rocks.com/en/tutorials/canvas/performance/) рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкрдврд╝реЗрдВ.

## рдХреАрдмреЛрд░реНрдб рдШрдЯрдирд╛рдУрдВ рдХреЛ рд╕рдВрднрд╛рд▓реЗрдВ

рдЖрдк рд╡рд┐рд╢рд┐рд╖реНрдЯ рдШрдЯрдирд╛рдУрдВ рдХреЛ рдХреЛрдб рдореЗрдВ рд╕рдВрд▓рдЧреНрди рдХрд░рдХреЗ рдШрдЯрдирд╛рдУрдВ рдХреЛ рд╕рдВрднрд╛рд▓рддреЗ рд╣реИрдВ. рдХреАрдмреЛрд░реНрдб рдХреА рдШрдЯрдирд╛рдУрдВ рдХреЛ рдкреВрд░реА рд╡рд┐рдВрдбреЛ рдкрд░ рдЯреНрд░рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрдмрдХрд┐ рдПрдХ `click` рдЬреИрд╕реЗ рдорд╛рдЙрд╕ рдЗрд╡реЗрдВрдЯ рдХреЛ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рддрддреНрд╡ рдХреЛ рдХреНрд▓рд┐рдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬреЛрдбрд╝рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ. рд╣рдо рдЗрд╕ рдкреВрд░реЗ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореЗрдВ рдХреАрдмреЛрд░реНрдб рдЗрд╡реЗрдВрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗ.

рдПрдХ рдШрдЯрдирд╛ рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рд╡рд┐рдВрдбреЛ рдХреЗ `addEventListener()` рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдФрд░ рдЗрд╕реЗ рджреЛ рдЗрдирдкреБрдЯ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рд╕рд╛рде рдкреНрд░рджрд╛рди рдХрд░рдирд╛ рд╣реЛрдЧрд╛. рдкрд╣рд▓рд╛ рдкреИрд░рд╛рдореАрдЯрд░ рдШрдЯрдирд╛ рдХрд╛ рдирд╛рдо рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП `keyup`. рджреВрд╕рд░рд╛ рдкреИрд░рд╛рдореАрдЯрд░ рд╡рд╣ рдлрд╝рдВрдХреНрд╢рди рд╣реЛрддрд╛ рд╣реИ, рдЬрд┐рд╕реЗ рдИрд╡реЗрдВрдЯ рд╣реЛрдиреЗ рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП.

рдпрд╣рд╛рдБ рдПрдХ рдЙрджрд╛рд╣рд░рдг рд╣реИ:

```javascript
window.addEventListener("keyup", (evt) => {
  // `evt.key` = string representation of the key
  if (evt.key === "ArrowUp") {
    // do something
  }
});
```

рдкреНрд░рдореБрдЦ рдШрдЯрдирд╛рдУрдВ рдХреЗ рд▓рд┐рдП, рдЗрд╕ рдШрдЯрдирд╛ рдкрд░ рджреЛ рдЧреБрдг рд╣реИрдВ рдЬрд┐рдиреНрд╣реЗрдВ рдЖрдк рдпрд╣ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдХрд┐рд╕ рдХреБрдВрдЬреА рдХреЛ рджрдмрд╛рдпрд╛ рдЧрдпрд╛ рдерд╛:

- `key`, рдпрд╣ рджрдмрд╛рдП рдЧрдП рдХреБрдВрдЬреА рдХрд╛ рдПрдХ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП` ArrowUp`
- `KeyCode`, рдпрд╣ рдПрдХ рд╕рдВрдЦреНрдпрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП` 37`, `ArrowLeft` рд╕реЗ рдореЗрд▓ рдЦрд╛рддреА рд╣реИ.

тЬЕ рдХреА рдЗрд╡реЗрдВрдЯ рд╣реЗрд░рдлреЗрд░ рдЦреЗрд▓ рдХреЗ рд╡рд┐рдХрд╛рд╕ рдХреЗ рдмрд╛рд╣рд░ рдЙрдкрдпреЛрдЧреА рд╣реИред рдЗрд╕ рддрдХрдиреАрдХ рдХреЗ рд▓рд┐рдП рдЖрдк рдФрд░ рдХреНрдпрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ?

### рд╡рд┐рд╢реЗрд╖ рдХреБрдВрдЬреА: рдПрдХ рдЪреЗрддрд╛рд╡рдиреА

рдХреБрдЫ _special_ рдХрд┐рдЗрд╕ рд╣реИрдВ рдЬреЛ рд╡рд┐рдВрдбреЛрдЬ рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рддреА рд╣реИрдВ. рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдпрджрд┐ рдЖрдк рдПрдХ `keyup` рдШрдЯрдирд╛ рд╕реБрди рд░рд╣реЗ рд╣реИрдВ рдФрд░ рдЖрдк рдЕрдкрдиреЗ рдирд╛рдпрдХ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрди рд╡рд┐рд╢реЗрд╖ рдХрд┐рдЗрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ рддреЛ рдпрд╣ рдХреНрд╖реИрддрд┐рдЬ рд╕реНрдХреНрд░реЙрд▓рд┐рдВрдЧ рднреА рдХрд░реЗрдЧрд╛.рдЗрд╕ рдХрд╛рд░рдг рд╕реЗ рдЖрдк рдЕрдкрдиреЗ рдЧреЗрдо рдХреЛ рдмрдирд╛рддреЗ рд╕рдордп рдЗрд╕ рдмрд┐рд▓реНрдЯ-рдЗрди рдмреНрд░рд╛рдЙрдЬрд╝рд░ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рдмрдВрдж рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЖрдкрдХреЛ рдЗрд╕ рддрд░рд╣ рдХреЛрдб рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ:

```javascript
let onKeyDown = function (e) {
  console.log(e.keyCode);
  switch (e.keyCode) {
    case 37:
    case 39:
    case 38:
    case 40: // Arrow keys
    case 32:
      e.preventDefault();
      break; // Space
    default:
      break; // do not block other keys
  }
};

window.addEventListener("keydown", onKeyDown);
```

рдЙрдкрд░реЛрдХреНрдд рдХреЛрдб рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдЧрд╛ рдХрд┐ рдПрд░реЛ рдХрд┐рдЗрд╕ рдФрд░ рд╕реНрдкреЗрд╕ рдХреА рдХрд╛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╡реНрдпрд╡рд╣рд╛рд░ рдмрдВрдж рд╣реЛред рд╢рдЯ-рдСрдл рддрдВрддреНрд░ рддрдм рд╣реЛрддрд╛ рд╣реИ рдЬрдм рд╣рдо `e.preventDefault ()` рдХрд╣рддреЗ рд╣реИрдВ.

## рдЦреЗрд▓ рдкреНрд░реЗрд░рд┐рдд рдЪрд╛рд▓

рд╣рдо рдЯрд╛рдЗрдо рд╕реЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЪреАрдЬреЛрдВ рдХреЛ рдЦреБрдж рд╕реЗ рдЖрдЧреЗ рдмрдврд╝рд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬреИрд╕реЗ `setTimeout()` рдпрд╛ `setInterval()` рдлрд╝рдВрдХреНрд╢рди рдЬреЛ рдкреНрд░рддреНрдпреЗрдХ рдЯрд┐рдХ рдкрд░ рд╡рд╕реНрддреБ рдХреЗ рд╕реНрдерд╛рди рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рддреЗ рд╣реИрдВ, рдпрд╛ рд╕рдордп рдЕрдВрддрд░рд╛рд▓ред. рдпрд╣рд╛рдВ рдРрд╕рд╛ рд╣реИ рдЬреЛ рджрд┐рдЦ рд╕рдХрддрд╛ рд╣реИ:

```javascript
let id = setInterval(() => {
  //move the enemy on the y axis
  enemy.y += 10;
});
```

## рдЧреЗрдо рд▓реВрдк

рдЧреЗрдо рд▓реВрдк рдПрдХ рдЕрд╡рдзрд╛рд░рдгрд╛ рд╣реИ рдЬреЛ рдЕрдирд┐рд╡рд╛рд░реНрдп рд░реВрдк рд╕реЗ рдПрдХ рдлрд╝рдВрдХреНрд╢рди рд╣реИ рдЬрд┐рд╕реЗ рдирд┐рдпрдорд┐рдд рдЕрдВрддрд░рд╛рд▓ рдкрд░ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ. рдЗрд╕реЗ рдЧреЗрдо рд▓реВрдк рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рджрд┐рдЦрд╛рдИ рджреЗрдиреЗ рд╡рд╛рд▓реА рд╕рднреА рдЪреАрдЬрд╝реЛрдВ рдХреЛ рд▓реВрдк рдореЗрдВ рдЦреАрдВрдЪрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП. рдЧреЗрдо рд▓реВрдк рдЙрди рд╕рднреА рдЧреЗрдо рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдЧреЗрдо рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реИрдВ, рдЙрди рд╕рднреА рдХреЛ рдбреНрд░реЙ рдХрд░рдирд╛ рдЬрдм рддрдХ рдХрд┐ рдХрд┐рд╕реА рдХрд╛рд░рдг рд╕реЗ рдЧреЗрдо рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рдирд╣реАрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП. рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП рдпрджрд┐ рдХреЛрдИ рд╡рд╕реНрддреБ рдПрдХ рд╢рддреНрд░реБ рд╣реИ рдЬреЛ рд▓реЗрдЬрд░ рд╕реЗ рдЯрдХрд░рд╛рддреА рд╣реИ рдФрд░ рдЙрдбрд╝рддреА рд╣реИ, рддреЛ рдпрд╣ рд╡рд░реНрддрдорд╛рди рдЧреЗрдо рд▓реВрдк рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рдирд╣реАрдВ рд╣реИ (рдмрд╛рдж рдХреЗ рдкрд╛рдареЛрдВ рдореЗрдВ рдЖрдк рдЗрд╕ рдкрд░ рдФрд░ рдЕрдзрд┐рдХ рд╕реАрдЦреЗрдВрдЧреЗ).

рдпрд╣рд╛рдБ рдПрдХ рдЧреЗрдо рд▓реВрдк рдЖрдорддреМрд░ рдкрд░ рдХреИрд╕рд╛ рджрд┐рдЦ рд╕рдХрддрд╛ рд╣реИ, рдХреЛрдб рдореЗрдВ рд╡реНрдпрдХреНрдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ:

```javascript
let gameLoopId = setInterval(
  () =>
    function gameLoop() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = "black";
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      drawHero();
      drawEnemies();
      drawStaticObjects();
    },
  200
);
```

рдЙрдкрд░реЛрдХреНрдд рд▓реВрдк рдХреЛ рдХреИрдирд╡рд╛рд╕ рдХреЛ рдлрд┐рд░ рд╕реЗ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рддреНрдпреЗрдХ `200` рдорд┐рд▓реАрд╕реЗрдХреЗрдВрдб рдкрд░ рд▓рдЧрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ. рдЖрдкрдХреЗ рдкрд╛рд╕ рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рдЕрдВрддрд░рд╛рд▓ рдЪреБрдирдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рд╣реИ рдЬреЛ рдЖрдкрдХреЗ рдЦреЗрд▓ рдХреЗ рд▓рд┐рдП рд╕рдордЭ рдореЗрдВ рдЖрддрд╛ рд╣реИ.

## рдЕрдВрддрд░рд┐рдХреНрд╖ рдЦреЗрд▓ рдХреЛ рдЬрд╛рд░реА рд░рдЦрдирд╛

рдЖрдк рдореМрдЬреВрджрд╛ рдХреЛрдб рд▓реЗрдВрдЧреЗ рдФрд░ рдЙрд╕реЗ рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд рдХрд░реЗрдВрдЧреЗред рдпрд╛ рддреЛ рдЙрд╕ рдХреЛрдб рд╕реЗ рд╢реБрд░реВ рдХрд░реЗрдВ рдЬреЛ рдЖрдкрдиреЗ рднрд╛рдЧ I рдХреЗ рджреМрд░рд╛рди рдкреВрд░рд╛ рдХрд┐рдпрд╛ рдерд╛ рдпрд╛ [рднрд╛рдЧ II- рд╕реНрдЯрд╛рд░реНрдЯрд░](../your-work) рдореЗрдВ рдХреЛрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ.

- **Moving the hero**: рдЖрдк рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдб рдЬреЛрдбрд╝реЗрдВрдЧреЗ рдХрд┐ рдЖрдк рддреАрд░ рдХрд┐рдЗрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдирд╛рдпрдХ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ.
- **Move enemies**: рджреБрд╢реНрдордиреЛрдВ рдХреЛ рдХрд┐рд╕реА рджрд┐рдП рдЧрдП рджрд░ рдкрд░ рдКрдкрд░ рд╕реЗ рдиреАрдЪреЗ рд▓реЗ рдЬрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рдХреЛрдб рдЬреЛрдбрд╝рдиреЗ рдХреА рднреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА.

## рдЕрдиреБрд╢рдВрд╕рд┐рдд рдХрджрдо

рдЙрди рдлрд╝рд╛рдЗрд▓реЛрдВ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдПрдБ рдЬреЛ рдЖрдкрдХреЗ рд▓рд┐рдП `your-work` рд╕рдм рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рдмрдирд╛рдИ рдЧрдИ рд╣реИрдВ. рдЗрд╕рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╢рд╛рдорд┐рд▓ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП:

```bash
-| assets
  -| enemyShip.png
  -| player.png
-| index.html
-| app.js
-| package.json
```

рдЖрдк рдЯрд╛рдЗрдк рдХрд░рдХреЗ рдЕрдкрдирд╛ рдкреНрд░реЛрдЬреЗрдХреНрдЯ `your_work` рдлрд╝реЛрд▓реНрдбрд░ рд╢реБрд░реВ рдХрд░реЗрдВ:

```bash
cd your-work
npm start
```

рдЙрдкрд░реЛрдХреНрдд рдкрддреЗ рдкрд░ рдПрдХ HTTP рд╕рд░реНрд╡рд░ рд╢реБрд░реВ рд╣реЛрдЧрд╛ `http: // localhost: 5000`. рдПрдХ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдЦреЛрд▓реЗрдВ рдФрд░ рдЙрд╕ рдкрддреЗ рдХреЛ рдЗрдирдкреБрдЯ рдХрд░реЗрдВ, рдЕрднреА рдЙрд╕реЗ рдирд╛рдпрдХ рдФрд░ рд╕рднреА рджреБрд╢реНрдордиреЛрдВ рдХреЛ рдкреНрд░рд╕реНрддреБрдд рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП; рдХреБрдЫ рднреА рдирд╣реАрдВ рдЪрд▓ рд░рд╣рд╛ рд╣реИ - рдлрд┐рд░ рднреА!

### рдХреЛрдб рдЬреЛрдбрд╝реЗрдВ

1. `рд╣реАрд░реЛ` рдФрд░ `рджреБрд╢реНрдорди` рдФрд░ `рдЧреЗрдо рдСрдмреНрдЬреЗрдХреНрдЯ` рдХреЗ рд▓рд┐рдП **рд╕рдорд░реНрдкрд┐рдд рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдЬреЛрдбрд╝реЗрдВ**, рдЙрдирдХреЗ рдкрд╛рд╕` x` рдФрд░ `y` рдЧреБрдг рд╣реЛрдиреЗ рдЪрд╛рд╣рд┐рдП ([рдЗрдиреНрд╣реЗрд░рд┐рдЯреЗрдВрд╕ рдпрд╛ рдХрдореНрдкреЛрдЬреАрд╢рди](../../README.md) рдкрд░ рднрд╛рдЧ рдпрд╛рдж рд░рдЦреЗрдВ ).

   _рд╕рдВрдХреЗрдд_ `рдЧреЗрдо рдСрдмреНрдЬреЗрдХреНрдЯ` `x` рдФрд░ `y` рдХреЗ рд╕рд╛рде рдПрдХ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ рдПрдХ рдХреИрдирд╡рд╛рд╕ рдкрд░ рдЦреБрдж рдХреЛ рдЖрдХрд░реНрд╖рд┐рдд рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП

   > рдЯрд┐рдк: рдиреАрдЪреЗ рдХреЗ рд░реВрдк рдореЗрдВ рджреЗрд▓рд┐рдиреЗрдЯреЗрдб рдХрдВрд╕реНрдЯреНрд░рдХреНрдЯрд░ рдХреЗ рд╕рд╛рде рдПрдХ рдирдпрд╛ реЪрдордУрдмреНрдЬреЗрдХреНрдЯ рд╡рд░реНрдЧ рдЬреЛрдбрд╝рдХрд░ рд╢реБрд░реВ рдХрд░реЗрдВ, рдФрд░ рдлрд┐рд░ рдЗрд╕реЗ рдХреИрдирд╡рд╛рд╕ рдкрд░ рдбреНрд░рд╛ рдХрд░реЗрдВ:

   ```javascript
   class GameObject {
     constructor(x, y) {
       this.x = x;
       this.y = y;
       this.dead = false;
       this.type = "";
       this.width = 0;
       this.height = 0;
       this.img = undefined;
     }

     draw(ctx) {
       ctx.drawImage(this.img, this.x, this.y, this.width, this.height);
     }
   }
   ```

рдЕрдм, рдЗрд╕ рдЧреЗрдордУрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рд╣реАрд░реЛ рдФрд░ рджреБрд╢реНрдорди рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд рдХрд░реЗрдВ.

```javascript
class Hero extends GameObject {
  constructor(x, y) {
    ...it needs an x, y, type, and speed
  }
}
```

```javascript
class Enemy extends GameObject {
  constructor(x, y) {
    super(x, y);
    (this.width = 98), (this.height = 50);
    this.type = "Enemy";
    let id = setInterval(() => {
      if (this.y < canvas.height - this.height) {
        this.y += 5;
      } else {
        console.log("Stopped at", this.y);
        clearInterval(id);
      }
    }, 300);
  }
}
```

2. **рдХреА рдИрд╡реЗрдВрдЯ рд╣реИрдВрдбрд▓рд░ рдЬреЛрдбрд╝реЗрдВ** рдХреА рдиреЗрд╡рд┐рдЧреЗрд╢рди рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП (рдмрд╛рдПрдВ / рджрд╛рдПрдВ рд╣реАрд░реЛ рдКрдкрд░ рд▓реЗ рдЬрд╛рдПрдВ)

   _REMEMBER_ рдпрд╣ рдХрд╛рд░реНрдЯреЗрд╢рд┐рдпрди рд╕рд┐рд╕реНрдЯрдо рд╣реИ, рдЯреЙрдк-рд▓реЗрдлреНрдЯ `0,0` рд╣реИ. рдпрд╣ рднреА рдпрд╛рдж рд░рдЦреЗрдВ рдХрд┐ _рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд╡реНрдпрд╡рд╣рд╛рд░_ рдХреЛ рд░реЛрдХрдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдб рдЬреЛрдбрд╝рдирд╛

   > рдЯрд┐рдк: рдЕрдкрдиреЗ onKeyDown рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдмрдирд╛рдПрдВ рдФрд░ рдЗрд╕реЗ рд╡рд┐рдВрдбреЛ рдореЗрдВ рдЕрдЯреИрдЪ рдХрд░реЗрдВ:

   ```javascript
    let onKeyDown = function (e) {
         console.log(e.keyCode);
           ...add the code from the lesson above to stop default behavior
         }
    };

    window.addEventListener("keydown", onKeyDown);
   ```

   рдЗрд╕ рдмрд┐рдВрджреБ рдкрд░ рдЕрдкрдиреЗ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХрдВрд╕реЛрд▓ рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ, рдФрд░ рд▓реЙрдЧ рдХрд┐рдП рдЬрд╛ рд░рд╣реЗ рдХреАрд╕реНрдЯреНрд░реЛрдХреНрд╕ рдХреЛ рджреЗрдЦреЗрдВ.

3. \*\* рд▓рд╛рдЧреВ рдХрд░реЗрдВ [[рдкрдм рдЙрдк рдкреИрдЯрд░реНрди](../../ README.md), рд╢реЗрд╖ рднрд╛рдЧреЛрдВ рдХрд╛ рдкрд╛рд▓рди рдХрд░рддреЗ рд╣реБрдП рдпрд╣ рдЖрдкрдХреЗ рдХреЛрдб рдХреЛ рд╕рд╛рдл рд░рдЦреЗрдЧрд╛.

   рдпрд╣ рдЕрдВрддрд┐рдо рднрд╛рдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:

   1. рд╡рд┐рдВрдбреЛ рдкрд░ **рдПрдХ рдШрдЯрдирд╛ рд╢реНрд░реЛрддрд╛ рдЬреЛрдбрд╝реЗрдВ**:

      ```javascript
      window.addEventListener("keyup", (evt) => {
        if (evt.key === "ArrowUp") {
          eventEmitter.emit(Messages.KEY_EVENT_UP);
        } else if (evt.key === "ArrowDown") {
          eventEmitter.emit(Messages.KEY_EVENT_DOWN);
        } else if (evt.key === "ArrowLeft") {
          eventEmitter.emit(Messages.KEY_EVENT_LEFT);
        } else if (evt.key === "ArrowRight") {
          eventEmitter.emit(Messages.KEY_EVENT_RIGHT);
        }
      });
      ```

   2. рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рдкреНрд░рдХрд╛рд╢рд┐рдд рдХрд░рдиреЗ рдФрд░ рд╕рджрд╕реНрдпрддрд╛ рд▓реЗрдиреЗ рдХреЗ рд▓рд┐рдП **рдПрдХ EventEmitter рд╡рд░реНрдЧ рдмрдирд╛рдПрдВ**:

      ```javascript
      class EventEmitter {
        constructor() {
          this.listeners = {};
        }

        on(message, listener) {
          if (!this.listeners[message]) {
            this.listeners[message] = [];
          }
          this.listeners[message].push(listener);
        }

        emit(message, payload = null) {
          if (this.listeners[message]) {
            this.listeners[message].forEach((l) => l(message, payload));
          }
        }
      }
      ```

   3. **рд╕реНрдерд┐рд░рд╛рдВрдХ рдЬреЛрдбрд╝реЗрдВ** рдФрд░ EventEmitter рд╕реЗрдЯ рдХрд░реЗрдВ:

      ```javascript
      const Messages = {
        KEY_EVENT_UP: "KEY_EVENT_UP",
        KEY_EVENT_DOWN: "KEY_EVENT_DOWN",
        KEY_EVENT_LEFT: "KEY_EVENT_LEFT",
        KEY_EVENT_RIGHT: "KEY_EVENT_RIGHT",
      };

      let heroImg,
        enemyImg,
        laserImg,
        canvas,
        ctx,
        gameObjects = [],
        hero,
        eventEmitter = new EventEmitter();
      ```

   4. **рдЦреЗрд▓ рдХреЛ рдкреНрд░рд╛рд░рдВрдн рдХрд░реЗрдВ**

   ```javascript
   function initGame() {
     gameObjects = [];
     createEnemies();
     createHero();

     eventEmitter.on(Messages.KEY_EVENT_UP, () => {
       hero.y -= 5;
     });

     eventEmitter.on(Messages.KEY_EVENT_DOWN, () => {
       hero.y += 5;
     });

     eventEmitter.on(Messages.KEY_EVENT_LEFT, () => {
       hero.x -= 5;
     });

     eventEmitter.on(Messages.KEY_EVENT_RIGHT, () => {
       hero.x += 5;
     });
   }
   ```

4. **рдЧреЗрдо рд▓реВрдк рд╕реЗрдЯ рдХрд░реЗрдВ**

   рдЧреЗрдо рдХреЛ рдкреНрд░рд╛рд░рдВрдн рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП window.onload рдлрд╝рдВрдХреНрд╢рди рдХреЛ рд░рд┐рдлреНрд▓реЗрдХреНрдЯрд░ рдХрд░реЗрдВ рдФрд░ рдПрдХ рдЕрдЪреНрдЫреЗ рдЕрдВрддрд░рд╛рд▓ рдкрд░ рдЧреЗрдо рд▓реВрдк рд╕реЗрдЯ рдХрд░реЗрдВред рдЖрдк рдПрдХ рд▓реЗрдЬрд░ рдмреАрдо рднреА рдЬреЛрдбрд╝ рдЬреЛреЬ рд╕рдХрддреЗ рд╣реИ:

   ```javascript
   window.onload = async () => {
     canvas = document.getElementById("canvas");
     ctx = canvas.getContext("2d");
     heroImg = await loadTexture("assets/player.png");
     enemyImg = await loadTexture("assets/enemyShip.png");
     laserImg = await loadTexture("assets/laserRed.png");

     initGame();
     let gameLoopId = setInterval(() => {
       ctx.clearRect(0, 0, canvas.width, canvas.height);
       ctx.fillStyle = "black";
       ctx.fillRect(0, 0, canvas.width, canvas.height);
       drawGameObjects(ctx);
     }, 100);
   };
   ```

5. рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдЕрдВрддрд░рд╛рд▓ рдкрд░ рджреБрд╢реНрдордиреЛрдВ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП **рдХреЛрдб рдЬреЛрдбрд╝реЗрдВ**

   рд╢рддреНрд░реБрдУрдВ рдХреЛ рдмрдирд╛рдиреЗ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдирдП рдЧреЗрдордСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХреНрд▓рд╛рд╕ рдореЗрдВ рдзрдХреЗрд▓рдиреЗ рдХреЗ рд▓рд┐рдП `createEnemies()` рдлрд╝рдВрдХреНрд╢рди рдХреЛ рд░рд┐рдлрд▓реЗрдХреНтАНрдЯрд░ рдХрд░реЗрдВ:

   ```javascript
   function createEnemies() {
     const MONSTER_TOTAL = 5;
     const MONSTER_WIDTH = MONSTER_TOTAL * 98;
     const START_X = (canvas.width - MONSTER_WIDTH) / 2;
     const STOP_X = START_X + MONSTER_WIDTH;

     for (let x = START_X; x < STOP_X; x += 98) {
       for (let y = 0; y < 50 * 5; y += 50) {
         const enemy = new Enemy(x, y);
         enemy.img = enemyImg;
         gameObjects.push(enemy);
       }
     }
   }
   ```

   рдФрд░ рд╣реАрд░реЛ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рдорд╛рди рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ `createHero()` рдлрд╝рдВрдХреНрд╢рди рдЬреЛрдбрд╝реЗрдВ.

   ```javascript
   function createHero() {
     hero = new Hero(canvas.width / 2 - 45, canvas.height - canvas.height / 4);
     hero.img = heroImg;
     gameObjects.push(hero);
   }
   ```

   рдФрд░ рдЕрдВрдд рдореЗрдВ, рдбреНрд░рд╛рдЗрдВрдЧ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ `drawGameObjects()` рдлрд╝рдВрдХреНрд╢рди рдЬреЛрдбрд╝реЗрдВ:

   ```javascript
   function drawGameObjects(ctx) {
     gameObjects.forEach((go) => go.draw(ctx));
   }
   ```

   рдЕрдкрдиреЗ рджреБрд╢реНрдордиреЛрдВ рдХреЛ рдЕрдкрдиреЗ рдирд╛рдпрдХ рдЕрдВрддрд░рд┐рдХреНрд╖ рдпрд╛рди рдкрд░ рдЖрдЧреЗ рдмрдврд╝рдирд╛ рд╢реБрд░реВ рдХрд░ рджреЗрдирд╛ рдЪрд╛рд╣рд┐рдП!

---

## ЁЯЪА рдЪреБрдиреМрддреА

рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдЬрдм рдЖрдк рдлрд╝рдВрдХреНрд╢рди рдФрд░ рдЪрд░ рдФрд░ рдХрдХреНрд╖рд╛рдПрдВ рдЬреЛрдбрд╝рдирд╛ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ рддреЛ рдЖрдкрдХрд╛ рдХреЛрдб 'рд╕реНрдкреЗрдЧреЗрдЯреА рдХреЛрдб' рдореЗрдВ рдмрджрд▓ рд╕рдХрддрд╛ рд╣реИ. рдЖрдк рдЕрдкрдиреЗ рдХреЛрдб рдХреЛ рдмреЗрд╣рддрд░ рддрд░реАрдХреЗ рд╕реЗ рдХреИрд╕реЗ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рдпрд╣ рдЕрдзрд┐рдХ рдкрдардиреАрдп рд╣реЛ? рдЕрдкрдиреЗ рдХреЛрдб рдХреЛ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд┐рд╕реНрдЯрдо рд╕реНрдХреЗрдЪ рдХрд░реЗрдВ, рднрд▓реЗ рд╣реА рд╡рд╣ рдЕрднреА рднреА рдПрдХ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд░рд╣рддрд╛ рд╣реЛ.

## рд╡реНрдпрд╛рдЦреНрдпрд╛рди рдХреЗ рдмрд╛рдж рдХреА рдХреНрд╡рд┐рдЬ

[рд╡реНрдпрд╛рдЦреНрдпрд╛рди рдХреЗ рдмрд╛рдж рдХреА рдХреНрд╡рд┐рдЬ](https://nice-beach-0fe9e9d0f.azurestaticapps.net/quiz/34?loc=hi)

## рд╕рдореАрдХреНрд╖рд╛ рдФрд░ рд╕реНрд╡ рдЕрдзреНрдпрдпрди

рдЬрдм рд╣рдо рдлреНрд░реЗрдорд╡рд░реНрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдмрд┐рдирд╛ рдЕрдкрдирд╛ рдЧреЗрдо рд▓рд┐рдЦ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдЧреЗрдо рдХреЗ рд╡рд┐рдХрд╛рд╕ рдХреЗ рд▓рд┐рдП рдХрдИ рдЬрд╛рд╡рд╛рд╕реНрдХреНрд░рд┐рдкреНрдЯ-рдЖрдзрд╛рд░рд┐рдд рдХреИрдирд╡рд╛рд╕ рдлреНрд░реЗрдорд╡рд░реНрдХ рд╣реИрдВ. рдХреБрдЫ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рд╕рдордп рд▓реЗ рд▓реЛ [рдЗрди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкрдврд╝рдирд╛](https://github.com/collections/javascript-game-engines).

## рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ

[рдЕрдкрдирд╛ рдХреЛрдб рдХрдореЗрдВрдЯ рдХрд░реЗрдВ](assignment.hi.md)
